{"ast":null,"code":"var _jsxFileName = \"/Users/namduong/Documents/dev/shop-project/frontend/src/components/admin/Dashboard/Dashboard.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport '../../../App.css';\nimport '../../../Styles/Dashboard.css';\nimport DashboardBody from './DashboardBody';\nimport DashboardMenu from './DashboardMenu';\nimport { faEnvelope, faFileInvoice, faHome, faInbox, faNewspaper, faShoppingBag, faTshirt, faUser } from '@fortawesome/free-solid-svg-icons';\nimport socketIOClient from \"socket.io-client\";\nimport { UserContext } from '../../../contexts/User';\nimport Axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nconst ENDPOINT = \"http://pe.heromc.net:4000\";\n\nfunction Dashboard(props) {\n  const menuItems = [{\n    id: \"1\",\n    name: \"Dashboard\",\n    icon: faHome\n  }, {\n    id: \"2\",\n    name: \"Live Chat\",\n    icon: faInbox\n  }, // {\n  //     id: \"3\",\n  //     name: \"Email\",\n  //     icon: faEnvelope\n  // },\n  {\n    id: \"3\",\n    name: \"Orders\",\n    icon: faFileInvoice\n  }, {\n    id: \"4\",\n    name: \"Products\",\n    icon: faTshirt\n  }, {\n    id: \"5\",\n    name: \"News\",\n    icon: faNewspaper\n  }, {\n    id: \"6\",\n    name: \"Users\",\n    icon: faUser\n  }, {\n    id: \"7\",\n    name: \"Collection\",\n    icon: faShoppingBag\n  }, {\n    id: \"8\",\n    name: \"Subscribers\",\n    icon: faEnvelope\n  }];\n  const [tabId, setTabId] = useState(\"1\");\n  const [openMenu, setOpenMenu] = useState(true);\n  const [productId, setProductId] = useState(\"\");\n  const socket = socketIOClient(ENDPOINT);\n  const [orderNotice, setOrderNotice] = useState(null);\n  const [notAdmin, setNotAdmin] = useState(true);\n  useEffect(() => {\n    if (localStorage.getItem('token')) {\n      Axios.get(`http://pe.heromc.net:4000/users/${localStorage.getItem('user-id')}`, {\n        headers: {\n          \"authorization\": `Bearer ${localStorage.getItem('token')}`\n        }\n      }).then(res => {\n        const userInfo = res.data.user;\n\n        if (userInfo.userRole === 'admin') {\n          socket.emit('join', {\n            sessionId: 'admin',\n            isAdmin: true\n          });\n          socket.on(\"placeAnOrder-notice\", function (data) {\n            setOrderNotice(data);\n          });\n        } else {\n          props.history.push('/admin');\n          setNotAdmin(true);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      props.history.push('/admin');\n    }\n  }, []);\n\n  const setTabIdOnClick = id => {\n    setTabId(id);\n  };\n\n  const setOpenMenuOnClick = id => {\n    if (openMenu) setOpenMenu(false);else setOpenMenu(true);\n  };\n\n  const [openCreate, setOpenCreate] = useState(false);\n\n  const setOpenCreateFunc = () => {\n    document.body.style.overflow = 'hidden';\n    setOpenCreate(true);\n  };\n\n  const setCloseCreateFunc = bool => {\n    document.body.style.overflow = 'unset';\n    setOpenCreate(bool);\n  };\n\n  const [openEdit, setOpenEdit] = useState(false);\n\n  const setOpenEditFunc = event => {\n    document.body.style.overflow = 'hidden';\n    setOpenEdit(true);\n    setProductId(event.target.id);\n  };\n\n  const setCloseEditFunc = bool => {\n    document.body.style.overflow = 'unset';\n    setOpenEdit(bool);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, notAdmin && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, \"cut\"), notAdmin === false && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Dashboard flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DashboardMenu, {\n    setTabIdOnClick: setTabIdOnClick,\n    setOpenMenuOnClick: setOpenMenuOnClick,\n    tabId: tabId,\n    menuItems: menuItems,\n    openMenu: openMenu,\n    setCloseCreateFunc: setCloseCreateFunc,\n    setCloseEditFunc: setCloseEditFunc,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(DashboardBody, {\n    tabId: tabId,\n    menuItems: menuItems,\n    openMenu: openMenu,\n    openCreate: openCreate,\n    openEdit: openEdit,\n    setOpenMenuOnClick: setOpenMenuOnClick,\n    setOpenCreateFunc: setOpenCreateFunc,\n    setCloseCreateFunc: setCloseCreateFunc,\n    setOpenEditFunc: setOpenEditFunc,\n    setCloseEditFunc: setCloseEditFunc,\n    productId: productId,\n    orderNotice: orderNotice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  })));\n}\n\nexport default withRouter(Dashboard);","map":{"version":3,"sources":["/Users/namduong/Documents/dev/shop-project/frontend/src/components/admin/Dashboard/Dashboard.js"],"names":["React","useContext","useEffect","useState","DashboardBody","DashboardMenu","faEnvelope","faFileInvoice","faHome","faInbox","faNewspaper","faShoppingBag","faTshirt","faUser","socketIOClient","UserContext","Axios","withRouter","ENDPOINT","Dashboard","props","menuItems","id","name","icon","tabId","setTabId","openMenu","setOpenMenu","productId","setProductId","socket","orderNotice","setOrderNotice","notAdmin","setNotAdmin","localStorage","getItem","get","headers","then","res","userInfo","data","user","userRole","emit","sessionId","isAdmin","on","history","push","catch","err","console","log","setTabIdOnClick","setOpenMenuOnClick","openCreate","setOpenCreate","setOpenCreateFunc","document","body","style","overflow","setCloseCreateFunc","bool","openEdit","setOpenEdit","setOpenEditFunc","event","target","setCloseEditFunc"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport '../../../App.css'\nimport '../../../Styles/Dashboard.css'\nimport DashboardBody from './DashboardBody'\nimport DashboardMenu from './DashboardMenu'\nimport { faEnvelope, faFileInvoice, faHome, faInbox, faNewspaper, faShoppingBag, faTshirt, faUser } from '@fortawesome/free-solid-svg-icons'\n\nimport socketIOClient from \"socket.io-client\"\nimport { UserContext } from '../../../contexts/User'\nimport Axios from 'axios'\nimport { withRouter } from 'react-router-dom'\nconst ENDPOINT = \"http://pe.heromc.net:4000\";\n\nfunction Dashboard(props) {\n    const menuItems = [\n        {\n            id: \"1\",\n            name: \"Dashboard\",\n            icon: faHome\n        },\n        {\n            id: \"2\",\n            name: \"Live Chat\",\n            icon: faInbox\n        },\n        // {\n        //     id: \"3\",\n        //     name: \"Email\",\n        //     icon: faEnvelope\n        // },\n        {\n            id: \"3\",\n            name: \"Orders\",\n            icon: faFileInvoice\n        },\n        {\n            id: \"4\",\n            name: \"Products\",\n            icon: faTshirt\n        },\n        {\n            id: \"5\",\n            name: \"News\",\n            icon: faNewspaper\n        },\n        {\n            id: \"6\",\n            name: \"Users\",\n            icon: faUser\n        },\n        {\n            id: \"7\",\n            name: \"Collection\",\n            icon: faShoppingBag\n        },\n        {\n            id: \"8\",\n            name: \"Subscribers\",\n            icon: faEnvelope\n        },\n    ]\n    const [tabId, setTabId] = useState(\"1\");\n    const [openMenu, setOpenMenu] = useState(true);\n    const [productId, setProductId] = useState(\"\")\n\n    const socket = socketIOClient(ENDPOINT);\n\n    const [orderNotice, setOrderNotice] = useState(null) \n    const [notAdmin, setNotAdmin] = useState(true)\n\n    useEffect(()=>{\n        if (localStorage.getItem('token')) {\n            Axios.get(`http://pe.heromc.net:4000/users/${localStorage.getItem('user-id')}`, { \n                headers: {\"authorization\" : `Bearer ${localStorage.getItem('token')}`}\n            })\n            .then(res => {\n                const userInfo = res.data.user; \n                if (userInfo.userRole === 'admin') {\n                    socket.emit('join', {\n                        sessionId: 'admin',\n                        isAdmin: true\n                    })\n                    socket.on(\"placeAnOrder-notice\", function(data) {\n                        setOrderNotice(data)\n                    }) \n                } else {\n                    props.history.push('/admin')\n                    setNotAdmin(true)                \n                }\n            })\n            .catch(err => { \n                console.log(err)\n            })\n        } else {\n            props.history.push('/admin')\n        }\n    },[]) \n\n    const setTabIdOnClick = (id) => {\n        setTabId(id);\n    }\n    const setOpenMenuOnClick = (id) => {\n        if (openMenu) setOpenMenu(false);\n        else setOpenMenu(true);\n    }\n\n    const [openCreate, setOpenCreate] = useState(false)\n\n    const setOpenCreateFunc = () => {\n        document.body.style.overflow = 'hidden';\n        setOpenCreate(true)\n    }\n\n    const setCloseCreateFunc = (bool) => {\n        document.body.style.overflow = 'unset';\n        setOpenCreate(bool)\n    }\n\n    const [openEdit, setOpenEdit] = useState(false)\n\n    const setOpenEditFunc = (event) => {\n        document.body.style.overflow = 'hidden';\n        setOpenEdit(true)\n        setProductId(event.target.id)\n    }\n    \n    const setCloseEditFunc = (bool) => {\n        document.body.style.overflow = 'unset';\n        setOpenEdit(bool)\n    }\n\n    return (\n        <div>\n            {\n                notAdmin && \n                <div>\n                    cut\n                </div>\n            }\n            {\n                notAdmin === false &&\n                <div className=\"Dashboard flex\">\n                    <DashboardMenu\n                        setTabIdOnClick = {setTabIdOnClick}\n                        setOpenMenuOnClick = {setOpenMenuOnClick}\n                        tabId = {tabId}\n                        menuItems = {menuItems}\n                        openMenu = {openMenu} \n                        setCloseCreateFunc={setCloseCreateFunc}\n                        setCloseEditFunc={setCloseEditFunc}\n                    />\n                    <DashboardBody\n                        tabId = {tabId}\n                        menuItems = {menuItems}\n                        openMenu = {openMenu}\n                        openCreate = {openCreate}\n                        openEdit = {openEdit}\n                        setOpenMenuOnClick = {setOpenMenuOnClick}\n                        setOpenCreateFunc={setOpenCreateFunc}\n                        setCloseCreateFunc={setCloseCreateFunc}\n                        setOpenEditFunc={setOpenEditFunc}\n                        setCloseEditFunc={setCloseEditFunc}\n                        productId={productId}\n                        orderNotice={orderNotice}\n                    />\n                </div>\n            }\n        </div>\n    )\n}\nexport default withRouter(Dashboard)"]},"metadata":{},"sourceType":"module"}