{"ast":null,"code":"var _jsxFileName = \"/Users/namduong/Documents/dev/shop-project/frontend/src/components/admin/Dashboard/Modal/DashboardNewsEdit.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\nexport default function DashboardNewsEdit(props) {\n  const createForm = useRef();\n  const cateInput = useRef();\n  const [isCheckedSmall, setIsCheckedSmall] = useState(false);\n  const [isCheckedMedium, setIsCheckedMedium] = useState(false);\n  const [isCheckedLarge, setIsCheckedLarge] = useState(false);\n  const [inputValue, setInputValue] = useState([]);\n  const [cate, setCate] = useState([]);\n  const [file, setFile] = useState([]);\n  const news = props.news;\n  const [productImg, setProductImg] = useState([]);\n  const [productName, setProductName] = useState(\"\");\n  const [productSale, setProductSale] = useState(0);\n  const [productPrice, setProductPrice] = useState(0);\n  const [productDes, setProductDes] = useState(\"\");\n  const [productCate, setProductCate] = useState(\"\");\n  const [productSize, setProductSize] = useState([]);\n  const [productSex, setProductSex] = useState([]);\n\n  const checkedSize = event => {\n    if (event.target.id === \"1\") {\n      if (isCheckedSmall) {\n        const size = productSize.filter(item => {\n          return item !== 'Small';\n        });\n        setProductSize(size);\n        setIsCheckedSmall(false);\n      } else {\n        setProductSize(productSize => [...productSize, 'Small']);\n        setIsCheckedSmall(true);\n      }\n    }\n\n    if (event.target.id === \"2\") {\n      if (isCheckedMedium) {\n        const size = productSize.filter(item => {\n          return item !== 'Medium';\n        });\n        setProductSize(size);\n        setIsCheckedMedium(false);\n      } else {\n        setProductSize(productSize => [...productSize, 'Medium']);\n        setIsCheckedMedium(true);\n      }\n    }\n\n    if (event.target.id === \"3\") {\n      const size = productSize.filter(item => {\n        return item !== 'Large';\n      });\n      setProductSize(size);\n\n      if (isCheckedLarge) {\n        setIsCheckedLarge(false);\n      } else {\n        setProductSize(productSize => [...productSize, 'Large']);\n        setIsCheckedLarge(true);\n      }\n    }\n  };\n\n  const handleOnChange = event => {\n    setInputValue({ ...inputValue,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  useEffect(() => {\n    // setProductName(product.productName)\n    // setProductImg(product.productImg)\n    // setProductSale(product.productSale)\n    // setProductPrice(product.productPrice)\n    // setProductDes(product.productDes)\n    // setProductCate(product.productCate)\n    // setProductSex(product.productSex)\n    // setProductSize(product.productSize)\n    axios.get(`http://localhost:4000/category`).then(res => {\n      setCate(res.data);\n    });\n\n    if (news) {\n      if (news.productSize) {\n        for (let i of news.productSize) {\n          if (i === \"Small\") setIsCheckedSmall(true);\n          if (i === \"Medium\") setIsCheckedMedium(true);\n          if (i === \"Large\") setIsCheckedLarge(true);\n        }\n      }\n    }\n  }, [news]);\n\n  const onSubmit = event => {\n    event.preventDefault();\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    const formData = new FormData();\n    const imageArr = Array.from(file);\n    imageArr.forEach(image => {\n      formData.append('productImg', image);\n    });\n    formData.append(\"productName\", productName);\n    formData.append(\"productSale\", productSale);\n    formData.append(\"productPrice\", productPrice);\n    formData.append(\"productCate\", productCate);\n    formData.append(\"productSize\", productSize);\n    formData.append(\"productDes\", productDes);\n    formData.append(\"productSex\", productSex);\n    formData.append(\"productDate\", new Date());\n    axios.post(`http://localhost:4000/news/update/${news._id}`, formData, config);\n    props.setCloseEditFunc(false);\n    props.setToastFunc(true);\n  };\n\n  const addNewCate = () => {\n    axios.post('http://localhost:4000/category', {\n      cateName: inputValue.cate\n    });\n    setCate(cate => [...cate, {\n      cateName: inputValue.cate\n    }]);\n    setProductCate(inputValue.cate);\n    cateInput.current.value = \"\";\n  };\n\n  const deleteImg = event => {\n    const id = event.target.id;\n    const virutalFile = [...file];\n    virutalFile.splice(id, 1);\n    setFile(virutalFile);\n    const items = [...productImg];\n    items.splice(id, 1);\n    setProductImg(items);\n    axios.post(`http://localhost:4000/products/update/${news._id}`, {\n      deleteImgId: id\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"DashboardProductInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }, \"News infomation\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-close flex-center\",\n    onClick: () => {\n      props.setCloseCreateFunc(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTimes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    encType: \"multipart/form-data\",\n    ref: createForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 25\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"title\",\n    onChange: handleOnChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }, \"Images \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: event => {\n      const files = event.target.files;\n\n      for (let i = 0; i < files.length; i++) {\n        setNewsImg(news => [...news, URL.createObjectURL(files[i])]);\n      }\n\n      const fileArr = Array.prototype.slice.call(files);\n      fileArr.forEach(item => {\n        setFile(file => [...file, item]);\n      });\n    },\n    type: \"file\",\n    name: \"newsImg\",\n    className: \"noborder\",\n    multiple: \"multiple\",\n    style: {\n      height: '50px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    style: {\n      overflowY: 'hidden',\n      flexWrap: 'wrap'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 29\n    }\n  }, newsImg && newsImg.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"create-box-img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      key: index,\n      src: item,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 49\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-box-img-overlay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      id: index,\n      onClick: deleteImg,\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 53\n      }\n    }, \"X\")));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 25\n    }\n  }, \"Category \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    style: {\n      width: \"350px\"\n    },\n    onChange: event => {\n      setCateValue(event.target.value);\n    },\n    value: cateValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 33\n    }\n  }), cateList.length > 0 && cateList.map((item, index) => {\n    console.log(item.newCate);\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 45\n      }\n    }, item.newCate);\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"cate\",\n    placeholder: \"New category?\",\n    style: {\n      margin: '0 10px'\n    },\n    onChange: handleOnChange,\n    ref: cateInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn\",\n    style: {\n      fontSize: '14px',\n      fontFamily: 'sans-serif',\n      fontWeight: '300',\n      padding: '0 10px',\n      cursor: 'pointer',\n      width: '350px',\n      height: '30px'\n    },\n    onClick: addNewCate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 29\n    }\n  }, \"Add new category\"))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: '1px #ddd solid'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(DashboardEditor, {\n    setNewsContent: setNewsContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-center\",\n    style: {\n      marginTop: '40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"create-box-btn btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 21\n    }\n  }, \"Add product\")))));\n}","map":{"version":3,"sources":["/Users/namduong/Documents/dev/shop-project/frontend/src/components/admin/Dashboard/Modal/DashboardNewsEdit.js"],"names":["React","useEffect","useRef","useState","FontAwesomeIcon","faTimes","axios","DashboardNewsEdit","props","createForm","cateInput","isCheckedSmall","setIsCheckedSmall","isCheckedMedium","setIsCheckedMedium","isCheckedLarge","setIsCheckedLarge","inputValue","setInputValue","cate","setCate","file","setFile","news","productImg","setProductImg","productName","setProductName","productSale","setProductSale","productPrice","setProductPrice","productDes","setProductDes","productCate","setProductCate","productSize","setProductSize","productSex","setProductSex","checkedSize","event","target","id","size","filter","item","handleOnChange","name","value","get","then","res","data","i","onSubmit","preventDefault","config","headers","formData","FormData","imageArr","Array","from","forEach","image","append","Date","post","_id","setCloseEditFunc","setToastFunc","addNewCate","cateName","current","deleteImg","virutalFile","splice","items","deleteImgId","setCloseCreateFunc","files","length","setNewsImg","URL","createObjectURL","fileArr","prototype","slice","call","height","overflowY","flexWrap","newsImg","map","index","width","setCateValue","cateValue","cateList","console","log","newCate","margin","fontSize","fontFamily","fontWeight","padding","cursor","border","setNewsContent","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport axios from 'axios'\n\nexport default function DashboardNewsEdit(props) {\n\n    const createForm = useRef();\n    const cateInput = useRef();\n    const [isCheckedSmall, setIsCheckedSmall] = useState(false);\n    const [isCheckedMedium, setIsCheckedMedium] = useState(false);\n    const [isCheckedLarge, setIsCheckedLarge] = useState(false);\n    const [inputValue, setInputValue] = useState([])\n    const [cate, setCate] = useState([])\n    const [file, setFile] = useState([])\n    const news = props.news\n\n\n    const [productImg, setProductImg] = useState([])\n    const [productName, setProductName] = useState(\"\")\n    const [productSale, setProductSale] = useState(0)\n    const [productPrice, setProductPrice] = useState(0)\n    const [productDes, setProductDes] = useState(\"\")\n    const [productCate, setProductCate] = useState(\"\")\n    const [productSize, setProductSize] = useState([])\n    const [productSex, setProductSex] = useState([])\n\n    const checkedSize = (event) => {\n        if (event.target.id === \"1\") {\n            if (isCheckedSmall) {\n                const size = productSize.filter((item)=> {\n                    return item !== 'Small'\n                })\n                setProductSize(size)\n                setIsCheckedSmall(false)\n            } else {\n                setProductSize(productSize=>[...productSize, 'Small'])\n                setIsCheckedSmall(true)\n            }\n        }\n        if (event.target.id === \"2\") {\n            if (isCheckedMedium) {\n                const size = productSize.filter((item)=> {\n                    return item !== 'Medium'\n                })\n                setProductSize(size)\n                setIsCheckedMedium(false)\n            } else {\n                setProductSize(productSize=>[...productSize, 'Medium'])\n                setIsCheckedMedium(true)\n            }\n        }\n        if (event.target.id === \"3\") {\n            const size = productSize.filter((item)=> {\n                return item !== 'Large'\n            })\n            setProductSize(size)\n            if (isCheckedLarge) {\n                setIsCheckedLarge(false)\n            } else {\n                setProductSize(productSize=>[...productSize, 'Large'])\n                setIsCheckedLarge(true)\n            }\n        }\n    }\n\n    const handleOnChange = (event) => {\n        setInputValue({...inputValue, [event.target.name]: event.target.value})\n    }\n    \n    useEffect(()=> {\n        // setProductName(product.productName)\n        // setProductImg(product.productImg)\n        // setProductSale(product.productSale)\n        // setProductPrice(product.productPrice)\n        // setProductDes(product.productDes)\n        // setProductCate(product.productCate)\n        // setProductSex(product.productSex)\n        // setProductSize(product.productSize)\n        axios.get(`http://localhost:4000/category`)\n            .then(res => {\n                setCate(res.data)\n            }\n        )\n        if (news) {\n            if (news.productSize) {\n                for (let i of news.productSize) {\n                    if(i === \"Small\") setIsCheckedSmall(true)\n                    if(i === \"Medium\") setIsCheckedMedium(true)\n                    if(i === \"Large\") setIsCheckedLarge(true)\n                }\n            }\n        }\n    },[news])\n\n    const onSubmit = (event) => {\n        event.preventDefault()\n        const config = {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        }\n\n        const formData = new FormData();\n\n        const imageArr = Array.from(file);\n        imageArr.forEach(image => {\n            formData.append('productImg', image);\n        });\n\n        formData.append(\"productName\", productName);\n        formData.append(\"productSale\", productSale);\n        formData.append(\"productPrice\", productPrice);\n        formData.append(\"productCate\", productCate);\n        formData.append(\"productSize\", productSize);\n        formData.append(\"productDes\", productDes);\n        formData.append(\"productSex\", productSex);\n        formData.append(\"productDate\", new Date());\n        axios.post(`http://localhost:4000/news/update/${news._id}`, formData, config)\n        props.setCloseEditFunc(false);\n        props.setToastFunc(true);\n    }\n\n    const addNewCate = () => {\n        axios.post('http://localhost:4000/category', {\n            cateName: inputValue.cate\n        })\n        setCate(cate=>[...cate, {cateName: inputValue.cate}])\n        setProductCate(inputValue.cate)\n        cateInput.current.value = \"\"\n    }\n\n    const deleteImg = (event) => {\n        const id = event.target.id\n        const virutalFile = [...file]\n        virutalFile.splice(id, 1)\n        setFile(virutalFile)\n\n        const items = [...productImg]\n        items.splice(id, 1)\n        setProductImg(items)\n        axios.post(`http://localhost:4000/products/update/${news._id}`, {\n            deleteImgId: id\n        })\n    }\n\n    return (\n        <div className=\"DashboardProductInfo\">\n            <div className=\"create-box\"> \n                <div className=\"create-box-title flex\">\n                    <div className=\"create-box-title-text\">\n                        News infomation\n                    </div>\n                    <div  \n                        className=\"create-box-title-close flex-center\"\n                        onClick={()=>{\n                            props.setCloseCreateFunc(false);\n                        }}\n                    >\n                        <FontAwesomeIcon icon={faTimes}/>\n                    </div>\n                </div>\n                <form onSubmit={onSubmit} encType=\"multipart/form-data\" ref={createForm}>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Title</div>\n                        <div className=\"dashboard-right\">\n                            <input type=\"text\" name=\"title\" onChange={handleOnChange} required></input>\n                        </div>\n                    </div>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Images </div>\n                        <div className=\"dashboard-right\">\n                            <input \n                                onChange={(event) => {\n                                    const files = event.target.files;\n                                    for (let i = 0; i< files.length; i++) {\n                                        setNewsImg(news=>[...news, URL.createObjectURL(files[i])])\n                                    }\n                                    const fileArr = Array.prototype.slice.call(files)\n                                    fileArr.forEach(item=>{\n                                        \n                                        setFile(file=>[...file, item])\n                                    })\n                                }}\n                                type=\"file\"\n                                name=\"newsImg\"\n                                className=\"noborder\"\n                                multiple=\"multiple\"\n                                style={{height: '50px'}}\n                            ></input>\n                            <div className=\"flex\" style={{ overflowY: 'hidden', flexWrap:'wrap'}}>\n                                { newsImg && \n                                    newsImg.map((item, index) => {\n                                        return (\n                                            <div key={index} className=\"create-box-img\">\n                                                <img key={index} src={item} alt=\"\"></img>\n                                                <div \n                                                    className=\"create-box-img-overlay\"\n                                                >\n                                                    <p\n                                                        id={index}\n                                                        onClick={deleteImg}\n                                                        className=\"icon\">X\n                                                    </p>\n                                                </div>\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Category </div>\n                        <div className=\"dashboard-right flex-center\">\n                            <select style={{ width: \"350px\"}} \n                                onChange={(event) => {setCateValue(event.target.value)}}\n                                value={cateValue}>\n                                <option></option>\n                                { cateList.length > 0 &&\n                                    cateList.map((item, index) => {\n                                        console.log(item.newCate)\n                                        return(\n                                            <option key={index}>{item.newCate}</option>\n                                        )\n                                    })\n                                }\n                            </select>\n                            <input type=\"text\" name=\"cate\" placeholder=\"New category?\" style={{  margin:'0 10px'}} onChange={handleOnChange} ref={cateInput}></input>\n                            <div className=\"btn\" style={{\n                                fontSize: '14px',\n                                fontFamily: 'sans-serif',\n                                fontWeight: '300',\n                                padding: '0 10px',\n                                cursor: 'pointer',\n                                width: '350px',\n                                height: '30px'\n                            }}\n                            onClick={addNewCate}>\n                                Add new category\n                            </div>\n                        </div>\n                    </div>\n                    <div style={{border: '1px #ddd solid'}}>\n                        <DashboardEditor\n                            setNewsContent= {setNewsContent}\n                        />\n                    </div>\n                    <div className=\"flex-center\" style={{marginTop: '40px'}}>\n                    <button className=\"create-box-btn btn\">\n                        Add product\n                    </button>\n                </div>\n                </form>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}