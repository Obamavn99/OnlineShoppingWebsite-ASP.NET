{"ast":null,"code":"var _jsxFileName = \"/Users/namduong/Documents/dev/shop-project/frontend/src/components/News/NewsBody.js\";\nimport React, { useEffect, useState } from 'react';\nimport '../../App.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFacebookF, faTwitter, faInstagram, faGoogle } from '@fortawesome/free-brands-svg-icons';\nimport classNames from 'classnames';\nimport axios from 'axios';\nimport { Link, withRouter } from 'react-router-dom';\n\nfunction NewsBody(props) {\n  const [news, setNews] = useState([]);\n  const [isSearchFocus, setIsSearchFocus] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const newsPerPage = 5;\n  const [currentTab, setCurrentTab] = useState(-1);\n  const [currentTabText, setCurrentTabText] = useState(\"\");\n  let firstPost = [];\n  let sortedCate = [];\n  let nextPosts = [];\n  let pages = [];\n  let pageNumbers = []; //Số trang được chia ra\n\n  let splicedCate = [];\n  useEffect(() => {\n    if (props.history.location.pathname === \"/news\") {\n      axios.get(`http://localhost:4000/news`).then(res => {\n        setNews(res.data);\n      });\n    } else {\n      axios.get(`http://localhost:4000/news/category/${props.match.params.cate}`).then(res => {\n        setNews(res.data);\n      });\n    }\n  }, []);\n\n  const choosePage = event => {\n    window.scrollTo(0, 0);\n\n    if (Number(event.target.id) === 0) {\n      setCurrentPage(currentPage);\n    } else if (Number(event.target.id) === -1) {\n      if (currentPage > 1) {\n        setCurrentPage(currentPage - 1);\n      } else {\n        setCurrentPage(1);\n      }\n    } else if (Number(event.target.id) === 999) {\n      setCurrentPage(currentPage + 1);\n    } else {\n      setCurrentPage(Number(event.target.id));\n    }\n  };\n\n  const topViews = news.sort((a, b) => b.newView - a.newView).slice(0, 3); //Top view on Category\n\n  if (news.length > 0) {\n    //Filt Posts depend on Category\n    let filterNews = [];\n\n    if (currentTab === -1) {\n      filterNews = news;\n    } else if (currentTabText) {\n      filterNews = news.filter(item => {\n        return item.newCate === currentTabText;\n      });\n    } else {\n      filterNews = news;\n    } //Panigation\n\n\n    const indexOfLastNews = currentPage * newsPerPage;\n    const indexOfFirstNews = indexOfLastNews - newsPerPage;\n    const currentNews = filterNews.slice(indexOfFirstNews, indexOfLastNews);\n\n    if (currentNews) {\n      firstPost = currentNews[0]; //Post of big image\n    }\n\n    nextPosts = currentNews.slice(1); //Panigation button\n\n    for (let i = 1; i <= Math.ceil(filterNews.length / newsPerPage); i++) {\n      pageNumbers.push(i);\n    }\n\n    if (currentPage === 2) {\n      pages.push(currentPage - 1, currentPage);\n    } else {\n      if (currentPage === 1 && pageNumbers.length === 1) {\n        pages.push();\n      } else if (currentPage === 1 && currentPage < pageNumbers.length) {\n        pages.push(currentPage, currentPage + 1);\n      } else if (currentPage === 2) {\n        pages.push(currentPage - 1, currentPage);\n      } else if (currentPage > 2 && currentPage < pageNumbers.length - 1) {\n        pages.push(currentPage - 1, currentPage);\n      } else if (currentPage === pageNumbers.length - 1) {\n        pages.push(currentPage - 1, currentPage);\n      } else {\n        pages.push(currentPage - 1, currentPage);\n      }\n    } //Get all category\n\n\n    const cate = Object.values(news.reduce((a, {\n      newCate\n    }) => {\n      a[newCate] = a[newCate] || {\n        newCate,\n        count: 0\n      };\n      a[newCate].count++;\n      return a;\n    }, Object.create(null))); //Sort and splice category by posts count\n\n    cate.sort((a, b) => b.count - a.count);\n    splicedCate = cate.splice(0, 5);\n    splicedCate.sort((a, b) => b.count - a.count);\n\n    for (let i = 0; i < splicedCate.length; i++) {\n      sortedCate.push(splicedCate[i].newCate);\n    }\n  }\n\n  const cateLink = `/news/category/${firstPost.newCate}`;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"NewsBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-big flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"newsbody-big-img\",\n    src: firstPost.newImg,\n    alt: \"z\",\n    onClick: () => {\n      window.scrollTo(0, 0);\n      props.history.push(`/news/${firstPost._id}`);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-info flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 29\n    }\n  }, firstPost.newTime), /*#__PURE__*/React.createElement(Link, {\n    to: cateLink,\n    className: \"newsbody-cate\",\n    onClick: () => {\n      window.scrollTo(0, 0);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }, firstPost.newCate)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-title\",\n    onClick: () => {\n      window.scrollTo(0, 0);\n      props.history.push(`/news/${firstPost._id}`);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 25\n    }\n  }, firstPost.newTitle), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, firstPost.newContent), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-link\",\n    onClick: () => {\n      window.scrollTo(0, 0);\n      props.history.push(`/news/${firstPost._id}`);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }, \"Read More\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-smaill-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  })), nextPosts.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newsbody-small\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newsbody-small-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"newsbody-small-img\",\n      src: item.newImg,\n      alt: \"z\",\n      onClick: () => {\n        window.scrollTo(0, 0);\n        props.history.push(`/news/category/${item.newCate}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newsbody-small-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newsbody-small-info flex-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newsbody-time\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 45\n      }\n    }, item.newTime), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newsbody-cate\",\n      onClick: () => {\n        window.scrollTo(0, 0);\n        props.history.push(`/news/category/${item.newCate}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 45\n      }\n    }, item.newCate)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newsbody-title\",\n      onClick: () => {\n        window.scrollTo(0, 0);\n        props.history.push(`/news/${item._id}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 41\n      }\n    }, item.newTitle), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newsbody-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 41\n      }\n    }, item.newContent), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newsbody-link\",\n      onClick: () => {\n        window.scrollTo(0, 0);\n        props.history.push(`/news/${item._id}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 41\n      }\n    }, \"Read More\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newsbody-smaill-line\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 33\n      }\n    }));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newspagnigation-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newspagnigation\",\n    onClick: choosePage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"-1\",\n    className: classNames({\n      newspagnigation_disable: currentPage === 1\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 29\n    }\n  }, \"\\u2190\"), pages.map(function (number, index) {\n    if (currentPage === number) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: number,\n        id: number,\n        className: \"newspagnigation-active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 41\n        }\n      }, number);\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: number,\n        id: number,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 37\n        }\n      }, number);\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"999\",\n    className: classNames({\n      newspagnigation_disable: currentPage === pageNumbers.length\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 29\n    }\n  }, \"\\u2192\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-widget\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 25\n    }\n  }, \"Search\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: isSearchFocus === true ? \"widget-form widget_search_click\" : \"widget-form\",\n    onMouseEnter: () => {\n      setIsSearchFocus(true);\n    },\n    onMouseLeave: () => {\n      setIsSearchFocus(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Search the site\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 29\n    }\n  }, \"Search\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-pop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 25\n    }\n  }, \"Popular Posts\"), topViews.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"widget-post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-post-img\",\n      style: {\n        backgroundImage: `url(${item.newImg})`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-post-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-post-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 45\n      }\n    }, item.newTitle), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-post-info2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"widget-post-time\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 49\n      }\n    }, item.newTime), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"widget-post-view\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 49\n      }\n    }, item.newView, \" view\"))));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-cate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 25\n    }\n  }, \"Categorys\"), splicedCate.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"widget-cate-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-cate-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 45\n      }\n    }, item.newCate), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-cate-count\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 45\n      }\n    }, item.count)));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-connect\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 25\n    }\n  }, \"Stay Connected\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-connect-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faFacebookF,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTwitter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faInstagram,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faGoogle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 33\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-newsletter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 25\n    }\n  }, \"Newsletter\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: isSearchFocus === true ? \"widget-form widget_search_click\" : \"widget-form\",\n    onMouseEnter: () => {\n      setIsSearchFocus(true);\n    },\n    onMouseLeave: () => {\n      setIsSearchFocus(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Enter your email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 29\n    }\n  }, \"Send\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default withRouter(NewsBody);","map":{"version":3,"sources":["/Users/namduong/Documents/dev/shop-project/frontend/src/components/News/NewsBody.js"],"names":["React","useEffect","useState","FontAwesomeIcon","faFacebookF","faTwitter","faInstagram","faGoogle","classNames","axios","Link","withRouter","NewsBody","props","news","setNews","isSearchFocus","setIsSearchFocus","currentPage","setCurrentPage","newsPerPage","currentTab","setCurrentTab","currentTabText","setCurrentTabText","firstPost","sortedCate","nextPosts","pages","pageNumbers","splicedCate","history","location","pathname","get","then","res","data","match","params","cate","choosePage","event","window","scrollTo","Number","target","id","topViews","sort","a","b","newView","slice","length","filterNews","filter","item","newCate","indexOfLastNews","indexOfFirstNews","currentNews","i","Math","ceil","push","Object","values","reduce","count","create","splice","cateLink","newImg","_id","newTime","newTitle","newContent","map","index","newspagnigation_disable","number","backgroundImage"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport '../../App.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {  faFacebookF, faTwitter, faInstagram, faGoogle } from '@fortawesome/free-brands-svg-icons';\nimport classNames from 'classnames'\nimport axios from 'axios'\nimport { Link, withRouter } from 'react-router-dom';\nfunction NewsBody(props) {\n    const [news, setNews] = useState([]);\n    const [isSearchFocus, setIsSearchFocus] = useState(false);\n    const [currentPage, setCurrentPage] = useState(1);\n    const newsPerPage = 5;\n    const [currentTab, setCurrentTab] = useState(-1);\n    const [currentTabText, setCurrentTabText] = useState(\"\");\n    let firstPost = [];\n    let sortedCate = [];\n    let nextPosts = [];\n    let pages = [];\n    let pageNumbers = []; //Số trang được chia ra\n    let splicedCate = []\n\n    useEffect(() => {\n        if (props.history.location.pathname === \"/news\") {\n            axios.get(`http://localhost:4000/news`)\n                .then(res => {\n                    setNews(res.data)\n                }\n            )\n        } else {\n            axios.get(`http://localhost:4000/news/category/${props.match.params.cate}`)\n                .then(res => {\n                    setNews(res.data)\n                }\n            )\n        }\n    },[])\n\n    const choosePage = (event) => {\n        window.scrollTo(0,0);\n        if (Number(event.target.id) === 0) {\n            setCurrentPage(currentPage)\n        } else if (Number(event.target.id) === -1) {\n            if (currentPage > 1) {\n                setCurrentPage(currentPage - 1)\n            } else {\n                setCurrentPage(1)\n            }\n        } else if (Number(event.target.id) === 999) {\n            setCurrentPage(currentPage + 1)\n        } else {\n            setCurrentPage(Number(event.target.id))\n        }\n    }\n    \n    \n    const topViews = (news.sort((a, b) => b.newView - a.newView)).slice(0,3); //Top view on Category\n    if (news.length > 0) {\n        //Filt Posts depend on Category\n        let filterNews = [];\n        if (currentTab === -1) {\n            filterNews = news;\n        } else if (currentTabText) {\n            filterNews = news.filter((item) => {\n                return item.newCate === currentTabText\n            })\n        } else {\n            filterNews = news;\n        }\n        //Panigation\n        const indexOfLastNews = currentPage * newsPerPage;\n        const indexOfFirstNews = indexOfLastNews - newsPerPage;\n        const currentNews = filterNews.slice(indexOfFirstNews, indexOfLastNews);\n        if (currentNews) {\n            firstPost = currentNews[0]; //Post of big image\n        }\n        nextPosts = currentNews.slice(1);\n\n        //Panigation button\n        for (let i = 1; i <= Math.ceil(filterNews.length / newsPerPage); i++) {\n            pageNumbers.push(i);\n        }\n        if (currentPage === 2) {\n            pages.push(currentPage - 1, currentPage);\n        } else {\n            if (currentPage === 1 && pageNumbers.length === 1) {\n                pages.push();\n            } else if (currentPage === 1 && currentPage < pageNumbers.length) {\n                pages.push(currentPage, currentPage + 1);\n            }else if (currentPage === 2) {\n                pages.push(currentPage - 1, currentPage);\n            } else if (currentPage > 2 && currentPage < pageNumbers.length - 1) {\n                pages.push(currentPage -1, currentPage);\n            } else if (currentPage === pageNumbers.length - 1) {\n                pages.push(currentPage - 1, currentPage);\n            } else {\n                pages.push(currentPage - 1, currentPage);\n            }\n        }\n\n        //Get all category\n        const cate = Object.values(news.reduce((a, {newCate}) => {\n            a[newCate] = a[newCate] || {newCate, count: 0};\n            a[newCate].count++;\n            return a;\n        }, Object.create(null)));\n        //Sort and splice category by posts count\n        cate.sort((a,b) =>  b.count - a.count)\n        splicedCate = cate.splice(0,5);\n        splicedCate.sort((a, b) => b.count - a.count);\n\n        for (let i = 0; i < splicedCate.length; i++) {\n            sortedCate.push(splicedCate[i].newCate);\n        }\n    }\n    const cateLink = (`/news/category/${firstPost.newCate}`)\n    \n    return(\n        <div className=\"NewsBody\">\n            <div className=\"newsbody-container\">\n                <div className=\"newsbody-post\">\n                    <div className=\"newsbody-big flex-center\">\n                        <img \n                            className=\"newsbody-big-img\" \n                            src={firstPost.newImg} alt=\"z\"\n                            onClick={()=>{\n                                window.scrollTo(0,0); \n                                props.history.push(`/news/${firstPost._id}`)\n                            }}\n                        />\n                        <div className=\"newsbody-info flex-center\">\n                            <div className=\"newsbody-time\">{firstPost.newTime}</div>\n                            <Link to={cateLink} className=\"newsbody-cate\" onClick={()=>{window.scrollTo(0,0);}}>{firstPost.newCate}</Link>\n                        </div>\n                        <div \n                            className=\"newsbody-title\"\n                            onClick={()=>{\n                                window.scrollTo(0,0); \n                                props.history.push(`/news/${firstPost._id}`)\n                            }}\n                        >{firstPost.newTitle}</div>\n                        <div className=\"newsbody-content\">{firstPost.newContent}</div>\n                        <div \n                            className=\"newsbody-link\"\n                            onClick={()=>{\n                                window.scrollTo(0,0); \n                                props.history.push(`/news/${firstPost._id}`)\n                            }}\n                        >Read More</div>\n                        <div className=\"newsbody-smaill-line\"></div>\n                    </div>\n                    {nextPosts.map((item, index) => {\n                        return (\n                            <div className=\"newsbody-small\" key={index}> \n                                <div className=\"newsbody-small-container\">\n                                    <img \n                                        className=\"newsbody-small-img\" \n                                        src={item.newImg} alt=\"z\"\n                                        onClick={()=>{\n                                            window.scrollTo(0,0); \n                                            props.history.push(`/news/category/${item.newCate}`)\n                                        }}\n                                    />\n                                    <div className=\"newsbody-small-left\">\n                                        <div className=\"newsbody-small-info flex-center\">\n                                            <div className=\"newsbody-time\">{item.newTime}</div>\n                                            <div \n                                                className=\"newsbody-cate\" \n                                                onClick={()=>{\n                                                    window.scrollTo(0,0); \n                                                    props.history.push(`/news/category/${item.newCate}`)\n                                                }}\n                                            >{item.newCate}</div>\n                                        </div>\n                                        <div \n                                            className=\"newsbody-title\"\n                                            onClick={()=>{\n                                                window.scrollTo(0,0); \n                                                props.history.push(`/news/${item._id}`)\n                                            }}\n                                        >{item.newTitle}</div>\n                                        <div className=\"newsbody-content\">{item.newContent}</div>\n                                        <div \n                                            className=\"newsbody-link\"\n                                            onClick={()=>{\n                                                window.scrollTo(0,0); \n                                                props.history.push(`/news/${item._id}`)\n                                            }}\n                                        >Read More</div>\n                                    </div>\n                                </div>\n                                <div className=\"newsbody-smaill-line\"></div>\n                            </div>\n                        )\n                    })}\n                    <div className=\"newspagnigation-container\">\n                        <div className=\"newspagnigation\" onClick={choosePage}>\n                            <div id=\"-1\" className={classNames({\n                                newspagnigation_disable: currentPage === 1\n                            })}>←</div>\n                            { pages.map(function(number, index) { \n                                if (currentPage === number) {\n                                    return (\n                                        <div key={number} id={number} className=\"newspagnigation-active\">\n                                            {number}\n                                        </div>\n                                    )\n                                } else {\n                                    return (\n                                    <div \n                                        key={number}\n                                        id={number}\n                                        >\n                                            {number}\n                                    </div>\n                                    )\n                                } \n                            })}\n                            <div id=\"999\" className={classNames({\n                                newspagnigation_disable: currentPage === pageNumbers.length\n                            })}>→</div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"newsbody-widget\">\n                    <div className=\"widget-search\">\n                        <div className=\"widget-title\">Search</div>\n                        <form className={ isSearchFocus === true ? \"widget-form widget_search_click\" : \"widget-form\"} \n                            onMouseEnter={() => { setIsSearchFocus(true)}}\n                            onMouseLeave={() => { setIsSearchFocus(false)}}>\n                            <input placeholder=\"Search the site\"></input>\n                            <button>Search</button>\n                        </form>\n                    </div>\n                    <div className=\"widget-pop\">\n                        <div className=\"widget-title\">Popular Posts</div>\n                        {\n                            topViews.map((item, index) => {\n                                return(\n                                    <div key={index} className=\"widget-post\">\n                                        <div className=\"widget-post-img\" style={{backgroundImage: `url(${item.newImg})`}}></div>\n                                        <div className=\"widget-post-info\">\n                                            <div className=\"widget-post-title\">{item.newTitle}</div>\n                                            <div className=\"widget-post-info2\">\n                                                <span className=\"widget-post-time\">{item.newTime}</span>\n                                                <span className=\"widget-post-view\">{item.newView} view</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                )\n                            })\n                        }\n                    </div>\n                    <div className=\"widget-cate\">\n                        <div className=\"widget-title\">Categorys</div>\n                        {\n                            splicedCate.map((item, index) => {\n                                return (\n                                    <div key={index} className=\"widget-cate-container\">\n                                        <div className=\"widget-cate-div\">\n                                            <div>{item.newCate}</div>\n                                            <div className=\"widget-cate-count\">{item.count}</div>\n                                        </div>\n                                    </div>\n                                )\n                            })\n                        }\n                    </div>\n                    <div className=\"widget-connect\">\n                        <div className=\"widget-title\">Stay Connected</div>\n                        <div className=\"widget-connect-container\">\n                            <div className=\"widget-icon\">\n                                <FontAwesomeIcon icon={faFacebookF}/>\n                            </div>\n                            <div className=\"widget-icon\">\n                                <FontAwesomeIcon icon={faTwitter}/>\n                            </div>\n                            <div className=\"widget-icon\">\n                                <FontAwesomeIcon icon={faInstagram}/>\n                            </div>\n                            <div className=\"widget-icon\">\n                                <FontAwesomeIcon icon={faGoogle}/>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"widget-newsletter\">\n                        <div className=\"widget-title\">Newsletter</div>\n                        <form className={ isSearchFocus === true ? \"widget-form widget_search_click\" : \"widget-form\"} \n                            onMouseEnter={() => { setIsSearchFocus(true)}}\n                            onMouseLeave={() => { setIsSearchFocus(false)}}>\n                            <input placeholder=\"Enter your email\"></input>\n                            <button>Send</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n            <div className=\"newsbody-line\"></div>\n        </div>\n    )\n}\nexport default withRouter(NewsBody);"]},"metadata":{},"sourceType":"module"}