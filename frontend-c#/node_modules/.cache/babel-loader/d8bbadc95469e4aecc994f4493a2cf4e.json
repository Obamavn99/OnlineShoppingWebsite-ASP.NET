{"ast":null,"code":"var _jsxFileName = \"/Users/namduong/Projects/frontend-c#/src/components/admin/Dashboard/Collection/DashboardCollectionEdit.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\nexport default function DashboardCollectionEdit(props) {\n  const createForm = useRef();\n  const [collectionName, setCollectionName] = useState(\"\");\n  const [collectionBanner, setCollectionBanner] = useState([]);\n  const [product, setProduct] = useState([]);\n  const [productList, setProductList] = useState([]);\n  const [file, setFile] = useState([]);\n  const collection = props.collection;\n  useEffect(() => {\n    axios.get(`https://localhost:4000/api/product`).then(res => {\n      setProduct(res.data);\n    });\n\n    if (collection) {\n      setCollectionBanner([collection.collectionBanner]);\n      setCollectionName(collection.collectionName);\n      setProductList(collection.collectionItems);\n    }\n  }, [collection]);\n\n  const onSubmit = event => {\n    event.preventDefault();\n    event.preventDefault();\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    const formData = new FormData();\n    const imageArr = Array.from(file);\n    imageArr.forEach(image => {\n      formData.append('collectionBanner', image);\n    });\n    formData.append(\"productList\", JSON.stringify(productList));\n    formData.append(\"collectionName\", collectionName);\n    axios.post(`https://localhost:4000/api/collection/update/${collection.id}`, formData, config);\n    props.setCloseEditFunc(false);\n    props.setToastFunc(true);\n  };\n\n  const deleteImg = event => {\n    const virutalFile = [...file];\n    virutalFile.splice(event.target.id, 1);\n    setFile(virutalFile);\n    const items = [...collectionBanner];\n    items.splice(event.target.id, 1);\n    setCollectionBanner(items);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"DashboardProductInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  });\n}","map":{"version":3,"sources":["/Users/namduong/Projects/frontend-c#/src/components/admin/Dashboard/Collection/DashboardCollectionEdit.js"],"names":["React","useEffect","useRef","useState","FontAwesomeIcon","faTimes","axios","DashboardCollectionEdit","props","createForm","collectionName","setCollectionName","collectionBanner","setCollectionBanner","product","setProduct","productList","setProductList","file","setFile","collection","get","then","res","data","collectionItems","onSubmit","event","preventDefault","config","headers","formData","FormData","imageArr","Array","from","forEach","image","append","JSON","stringify","post","id","setCloseEditFunc","setToastFunc","deleteImg","virutalFile","splice","target","items"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,OAAT,QAAwB,mCAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,uBAAT,CAAiCC,KAAjC,EAAwC;AAEnD,QAAMC,UAAU,GAAGP,MAAM,EAAzB;AAEA,QAAM,CAACQ,cAAD,EAAiBC,iBAAjB,IAAsCR,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACS,gBAAD,EAAmBC,mBAAnB,IAA0CV,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACa,WAAD,EAAcC,cAAd,IAAgCd,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACe,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAC,EAAD,CAAhC;AAEA,QAAMiB,UAAU,GAAGZ,KAAK,CAACY,UAAzB;AAEAnB,EAAAA,SAAS,CAAC,MAAI;AACVK,IAAAA,KAAK,CAACe,GAAN,CAAW,oCAAX,EACKC,IADL,CACUC,GAAG,IAAI;AACTR,MAAAA,UAAU,CAACQ,GAAG,CAACC,IAAL,CAAV;AACH,KAHL;;AAKA,QAAIJ,UAAJ,EAAgB;AACZP,MAAAA,mBAAmB,CAAC,CAACO,UAAU,CAACR,gBAAZ,CAAD,CAAnB;AACAD,MAAAA,iBAAiB,CAACS,UAAU,CAACV,cAAZ,CAAjB;AACAO,MAAAA,cAAc,CAACG,UAAU,CAACK,eAAZ,CAAd;AACH;AACJ,GAXQ,EAWP,CAACL,UAAD,CAXO,CAAT;;AAaA,QAAMM,QAAQ,GAAIC,KAAD,IAAW;AACxBA,IAAAA,KAAK,CAACC,cAAN;AAEAD,IAAAA,KAAK,CAACC,cAAN;AACA,UAAMC,MAAM,GAAG;AACXC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX;AADE,KAAf;AAMA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACA,UAAMC,QAAQ,GAAGC,KAAK,CAACC,IAAN,CAAWjB,IAAX,CAAjB;AACAe,IAAAA,QAAQ,CAACG,OAAT,CAAiBC,KAAK,IAAI;AACtBN,MAAAA,QAAQ,CAACO,MAAT,CAAgB,kBAAhB,EAAoCD,KAApC;AACH,KAFD;AAGAN,IAAAA,QAAQ,CAACO,MAAT,CAAgB,aAAhB,EAA+BC,IAAI,CAACC,SAAL,CAAexB,WAAf,CAA/B;AACAe,IAAAA,QAAQ,CAACO,MAAT,CAAgB,gBAAhB,EAAkC5B,cAAlC;AACAJ,IAAAA,KAAK,CAACmC,IAAN,CAAY,gDAA+CrB,UAAU,CAACsB,EAAG,EAAzE,EAA4EX,QAA5E,EAAsFF,MAAtF;AAEArB,IAAAA,KAAK,CAACmC,gBAAN,CAAuB,KAAvB;AACAnC,IAAAA,KAAK,CAACoC,YAAN,CAAmB,IAAnB;AACH,GArBD;;AAuBA,QAAMC,SAAS,GAAIlB,KAAD,IAAW;AACzB,UAAMmB,WAAW,GAAG,CAAC,GAAG5B,IAAJ,CAApB;AACA4B,IAAAA,WAAW,CAACC,MAAZ,CAAmBpB,KAAK,CAACqB,MAAN,CAAaN,EAAhC,EAAoC,CAApC;AACAvB,IAAAA,OAAO,CAAC2B,WAAD,CAAP;AAEA,UAAMG,KAAK,GAAG,CAAC,GAAGrC,gBAAJ,CAAd;AACAqC,IAAAA,KAAK,CAACF,MAAN,CAAapB,KAAK,CAACqB,MAAN,CAAaN,EAA1B,EAA8B,CAA9B;AACA7B,IAAAA,mBAAmB,CAACoC,KAAD,CAAnB;AACH,GARD;;AAUA,sBACI;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AA6JH","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport axios from 'axios'\n\nexport default function DashboardCollectionEdit(props) {\n\n    const createForm = useRef();\n\n    const [collectionName, setCollectionName] = useState(\"\")\n    const [collectionBanner, setCollectionBanner] = useState([])\n    const [product, setProduct] = useState([])\n    const [productList, setProductList] = useState([])\n    const [file, setFile] = useState([])\n\n    const collection = props.collection\n\n    useEffect(()=>{\n        axios.get(`https://localhost:4000/api/product`)\n            .then(res => {\n                setProduct(res.data)\n            }\n        )\n        if (collection) {\n            setCollectionBanner([collection.collectionBanner])\n            setCollectionName(collection.collectionName)\n            setProductList(collection.collectionItems)\n        }\n    },[collection])\n\n    const onSubmit = (event) => {\n        event.preventDefault()\n\n        event.preventDefault()\n        const config = {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        }\n\n        const formData = new FormData();\n        const imageArr = Array.from(file);\n        imageArr.forEach(image => {\n            formData.append('collectionBanner', image);\n        })\n        formData.append(\"productList\", JSON.stringify(productList));\n        formData.append(\"collectionName\", collectionName);\n        axios.post(`https://localhost:4000/api/collection/update/${collection.id}`, formData, config)\n\n        props.setCloseEditFunc(false);\n        props.setToastFunc(true);\n    }\n\n    const deleteImg = (event) => {\n        const virutalFile = [...file]\n        virutalFile.splice(event.target.id, 1)\n        setFile(virutalFile)\n\n        const items = [...collectionBanner]\n        items.splice(event.target.id, 1)\n        setCollectionBanner(items)\n    }\n\n    return (\n        <div className=\"DashboardProductInfo\">\n            {/* <div className=\"create-box\"> \n                <div className=\"create-box-title flex\">\n                    <div className=\"create-box-title-text\">\n                        Order infomation\n                    </div>\n                    <div  \n                        className=\"create-box-title-close flex-center\"\n                        onClick={()=>{\n                            props.setCloseEditFunc(false);\n                        }}\n                    >\n                        <FontAwesomeIcon icon={faTimes}/>\n                    </div>\n                </div>\n                <form onSubmit={onSubmit} encType=\"multipart/form-data\" ref={createForm}>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Name</div>\n                        <div className=\"dashboard-right\">\n                            <input \n                                type=\"text\" name=\"name\" \n                                value={collectionName || \"\"}\n                                onChange={(event)=>{\n                                    setCollectionName(event.target.value)\n                                }} required\n                            ></input>\n                        </div>\n                    </div>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Collection Banner </div>\n                        <div className=\"dashboard-right\">\n                            <input \n                                onChange={(event) => {\n                                    const files = event.target.files;\n                                    for (let i = 0; i< files.length; i++) {\n                                        setCollectionBanner(news=>[...news, URL.createObjectURL(files[i])])\n                                    }\n                                    const fileArr = Array.prototype.slice.call(files)\n                                    fileArr.forEach(item=>{\n                                        setFile(file=>[...file, item])\n                                    })\n                                }}\n                                type=\"file\"\n                                className=\"noborder\"\n                                multiple=\"multiple\"\n                                style={{height: '50px'}}\n                            ></input>\n                            <div className=\"flex\" style={{ overflowY: 'hidden', flexWrap:'wrap'}}>\n                                { collectionBanner && \n                                    collectionBanner.map((item, index) => {\n                                        return (\n                                            <div key={index} className=\"create-box-img\" style={{width: '130px'}}>\n                                                <img key={index} src={item} alt=\"\"></img>\n                                                <div \n                                                    className=\"create-box-img-overlay\"\n                                                >\n                                                    <p\n                                                        id={index}\n                                                        onClick={deleteImg}\n                                                        className=\"icon\">X\n                                                    </p>\n                                                </div>\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Items</div>\n                        <div className=\"dashboard-right\">\n                            <select \n                                className=\"input\"\n                                style={{height: '25px', marginBottom: '10px'}}\n                                value={\"\"}\n                                onChange={(event)=>{\n                                    const isExists = (cartItems = [], item = {}) => {\n                                        for (let cartItem of cartItems) {\n                                            if (cartItem.id === item.id) {\n                                                return cartItem;\n                                            }\n                                        }\n                                        return false;\n                                    }\n\n                                    const value = event.target.value\n                                    const virtualCart = [...productList] \n                                    if (productList.length === 0) {\n                                        virtualCart.push({...JSON.parse(value), count: 1})\n                                    } else {\n                                        if (!isExists(productList, JSON.parse(value))) {\n                                            virtualCart.push({...JSON.parse(value), count: 1})\n                                        } else {\n                                            for (let i = 0; i < virtualCart.length; i++) {\n                                                if (virtualCart[i].id === JSON.parse(value).id) {\n                                                    virtualCart[i].count += 1\n                                                    break\n                                                }\n                                            }\n                                        }\n                                    }\n                                    setProductList(virtualCart)\n                                }}\n                            >\n                                <option selected value>select a product</option>\n                                {product.map((item, index) => {\n                                    return (\n                                        <option\n                                            key={index}\n                                            value={JSON.stringify(item)}\n                                        >Name: {item.productName}, Price: {item.productFinalPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")}</option>\n                                    )\n                                })}\n                            </select>\n                            <div className=\"\" style={{ overflowY: 'hidden', flexWrap:'wrap'}}>\n                                { productList && \n                                    productList.map((item, index) => {\n                                        return (\n                                            <div \n                                                key={index}\n                                                className=\"order-list-item\"\n                                            >\n                                                <img src={item.productImg[0]} alt=\"\"></img>\n                                                <p style={{width: '55%'}}>{item.productName}</p>\n                                                <div \n                                                    id={index}\n                                                    className=\"delete-order-item flex-center\"\n                                                    onClick={(event)=>{\n                                                        var arr = [];\n                                                        const id = event.target.id;\n                                                        for (let i in productList) {\n                                                            if (i !== id) {\n                                                                arr.push(productList[i])\n                                                            }\n                                                        }\n                                                        setProductList(arr)\n                                                    }}>\n                                                    <FontAwesomeIcon style={{pointerEvents: 'none'}} icon={faTimes}/>\n                                                </div>\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </div>\n                        </div>\n                    </div> \n                    <div className=\"flex-center\" style={{marginTop: '40px'}}>\n                        <button className=\"create-box-btn btn\">\n                            Update collection\n                        </button>\n                    </div>\n                </form>\n            </div> */}\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}