{"ast":null,"code":"var _jsxFileName = \"/Users/namduong/Documents/dev/shop-project/frontend/src/components/admin/Dashboard/Modal/DashboardProductEdit.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\nexport default function DashboardProductEdit(props) {\n  const createForm = useRef();\n  const cateInput = useRef();\n  const [isCheckedSmall, setIsCheckedSmall] = useState(false);\n  const [isCheckedMedium, setIsCheckedMedium] = useState(false);\n  const [isCheckedLarge, setIsCheckedLarge] = useState(false);\n  const [inputValue, setInputValue] = useState([]);\n  const [cate, setCate] = useState([]);\n  const [cateValue, setCateValue] = useState(\"\");\n  const [size, setSize] = useState([]);\n  const [sex, setSex] = useState(\"\");\n  const [file, setFile] = useState([]);\n  const product = props.product;\n  const [productImg, setProductImg] = useState([]);\n\n  const checkedSize = event => {\n    if (event.target.id === \"1\") {\n      if (isCheckedSmall) {\n        setIsCheckedSmall(false);\n      } else {\n        setSize(size => [...size, 'Small']);\n        setIsCheckedSmall(true);\n      }\n    }\n\n    if (event.target.id === \"2\") {\n      if (isCheckedMedium) {\n        setIsCheckedMedium(false);\n      } else {\n        setSize(size => [...size, 'Medium']);\n        setIsCheckedMedium(true);\n      }\n    }\n\n    if (event.target.id === \"3\") {\n      if (isCheckedLarge) {\n        setIsCheckedLarge(false);\n      } else {\n        setSize(size => [...size, 'Large']);\n        setIsCheckedLarge(true);\n      }\n    }\n  };\n\n  const handleOnChange = event => {\n    setInputValue({ ...inputValue,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const dataURItoBlob = dataURI => {\n    if (dataURI) {\n      console.log(dataURI); // var byteString = atob(dataURI.split(',')[1]);\n\n      console.log(dataURI.split(',')); // var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n      // var ab = new ArrayBuffer(byteString.length);\n      // var ia = new Uint8Array(ab);\n      // for (var i = 0; i < byteString.length; i++) {\n      //     ia[i] = byteString.charCodeAt(i);\n      // }\n      // return new Blob([ab], {type: mimeString});\n    }\n  };\n\n  useEffect(() => {\n    setProductImg(product.productImg);\n\n    if (product) {\n      if (product.productImg) {\n        product.productImg.map(async item => {\n          const blob = new blob();\n          const test = new File([blob], 'image.jpg', {\n            type: blob.type\n          });\n          console.log(test); // console.log(blob)\n          // setFile(file=>[...file, URL.createObjectURL(item)])\n        });\n      }\n    }\n\n    axios.get(`http://localhost:4000/category`).then(res => {\n      setCate(res.data);\n    });\n\n    if (product) {\n      if (product.productSize) {\n        for (let i of product.productSize) {\n          if (i === \"Small\") setIsCheckedSmall(true);\n          if (i === \"Medium\") setIsCheckedMedium(true);\n          if (i === \"Large\") setIsCheckedLarge(true);\n        }\n      }\n    }\n  }, [product]);\n\n  const onSubmit = event => {\n    event.preventDefault();\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    const formData = new FormData();\n    const imageArr = Array.from(file);\n    imageArr.forEach(image => {\n      formData.append('productImg', image);\n    });\n    formData.append(\"productName\", inputValue.name);\n    formData.append(\"productSale\", inputValue.sale);\n    formData.append(\"productPrice\", inputValue.price);\n    formData.append(\"productCate\", cateValue);\n    formData.append(\"productSize\", size);\n    formData.append(\"productDes\", inputValue.des);\n    formData.append(\"productSex\", sex);\n    axios.post(`http://localhost:4000/products/update`, formData, config);\n    props.setCloseEditFunc(false);\n    props.setToastFunc(true);\n  };\n\n  const addNewCate = () => {\n    axios.post('http://localhost:4000/category', {\n      cateName: inputValue.cate\n    });\n    setCate(cate => [...cate, {\n      cateName: inputValue.cate\n    }]);\n    setCateValue(inputValue.cate);\n    cateInput.current.value = \"\";\n  };\n\n  const deleteImg = event => {\n    const virutalFile = [...file];\n    virutalFile.splice(event.target.id, 1);\n    setFile(virutalFile);\n    const items = [...productImg];\n    items.splice(event.target.id, 1);\n    setProductImg(items);\n  }; // console.log(file)\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"DashboardProductInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, \"Product infomation\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-close flex-center\",\n    onClick: () => {\n      props.setCloseEditFunc(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTimes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 25\n    }\n  }))), product && /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    encType: \"multipart/form-data\",\n    ref: createForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 29\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    value: product.productName || 0,\n    onChange: handleOnChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 29\n    }\n  }, \"Images \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: event => {\n      const files = event.target.files;\n\n      for (let i = 0; i < files.length; i++) {\n        setProductImg(product => [...product, URL.createObjectURL(files[i])]);\n      }\n\n      const fileArr = Array.prototype.slice.call(files);\n      fileArr.forEach(item => {\n        setFile(file => [...file, item]);\n      });\n    },\n    type: \"file\",\n    name: \"productImg\",\n    className: \"noborder\",\n    multiple: \"multiple\",\n    style: {\n      height: '50px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    style: {\n      overflowY: 'hidden',\n      flexWrap: 'wrap'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 33\n    }\n  }, productImg && productImg.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-box-img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      key: index,\n      src: item,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 53\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-box-img-overlay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      id: index,\n      onClick: deleteImg,\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 57\n      }\n    }, \"X\")));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 29\n    }\n  }, \"Defaut price \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    name: \"price\",\n    placeholder: \"USD\",\n    value: product.productPrice || 0,\n    onChange: handleOnChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 29\n    }\n  }, \"Sale \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"%\",\n    style: {\n      width: \"100px\"\n    },\n    onChange: handleOnChange,\n    name: \"sale\",\n    value: product.productSale || 0,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 33\n    }\n  }, \"From: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    name: \"fromdate\",\n    onChange: handleOnChange,\n    placeholder: \"dd/mm/yyyy\",\n    pattern: \"(^(((0[1-9]|1[0-9]|2[0-8])[\\\\/](0[1-9]|1[012]))|((29|30|31)[\\\\/](0[13578]|1[02]))|((29|30)[\\\\/](0[4,6,9]|11)))[\\\\/](19|[2-9][0-9])\\\\d\\\\d$)|(^29[\\\\/]02[\\\\/](19|[2-9][0-9])(00|04|08|12|16|20|24|28|32|36|40|44|48|52|56|60|64|68|72|76|80|84|88|92|96)$)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 33\n    }\n  }, \"To: \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    name: \"todate\",\n    onChange: handleOnChange,\n    placeholder: \"dd/mm/yyyy\",\n    pattern: \"(^(((0[1-9]|1[0-9]|2[0-8])[\\\\/](0[1-9]|1[012]))|((29|30|31)[\\\\/](0[13578]|1[02]))|((29|30)[\\\\/](0[4,6,9]|11)))[\\\\/](19|[2-9][0-9])\\\\d\\\\d$)|(^29[\\\\/]02[\\\\/](19|[2-9][0-9])(00|04|08|12|16|20|24|28|32|36|40|44|48|52|56|60|64|68|72|76|80|84|88|92|96)$)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 29\n    }\n  }, \"Category \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    style: {\n      width: \"350px\"\n    },\n    onChange: event => {\n      setCateValue(event.target.value);\n    },\n    value: cateValue || product.productCate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 37\n    }\n  }), cate.length > 0 && cate.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 49\n      }\n    }, item.cateName);\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"cate\",\n    placeholder: \"New category?\",\n    style: {\n      margin: '0 10px'\n    },\n    onChange: handleOnChange,\n    ref: cateInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn\",\n    style: {\n      fontSize: '14px',\n      fontFamily: 'sans-serif',\n      fontWeight: '300',\n      padding: '0 10px',\n      cursor: 'pointer',\n      width: '350px',\n      height: '30px'\n    },\n    onClick: addNewCate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 33\n    }\n  }, \"Add new category\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 29\n    }\n  }, \"Sex \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    style: {\n      width: \"200px\"\n    },\n    onChange: event => {\n      setSex(event.target.value);\n    },\n    value: sex || product.productSex,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 37\n    }\n  }, \"Man\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 37\n    }\n  }, \"Woman\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 29\n    }\n  }, \"Size \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: isCheckedSmall ? \"size-check isChecked\" : \"size-check\",\n    id: \"1\",\n    onClick: checkedSize,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 33\n    }\n  }, \"Small\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: isCheckedMedium ? \"size-check isChecked\" : \"size-check\",\n    id: \"2\",\n    onClick: checkedSize,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 33\n    }\n  }, \"Medium\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: isCheckedLarge ? \"size-check isChecked\" : \"size-check\",\n    id: \"3\",\n    onClick: checkedSize,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 33\n    }\n  }, \"Large\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 29\n    }\n  }, \"Description \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"des\",\n    value: product.productDes || \"\",\n    onChange: handleOnChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-center\",\n    style: {\n      marginTop: '40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"create-box-btn btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 29\n    }\n  }, \"Update product\")))));\n}","map":{"version":3,"sources":["/Users/namduong/Documents/dev/shop-project/frontend/src/components/admin/Dashboard/Modal/DashboardProductEdit.js"],"names":["React","useEffect","useRef","useState","FontAwesomeIcon","faTimes","axios","DashboardProductEdit","props","createForm","cateInput","isCheckedSmall","setIsCheckedSmall","isCheckedMedium","setIsCheckedMedium","isCheckedLarge","setIsCheckedLarge","inputValue","setInputValue","cate","setCate","cateValue","setCateValue","size","setSize","sex","setSex","file","setFile","product","productImg","setProductImg","checkedSize","event","target","id","handleOnChange","name","value","dataURItoBlob","dataURI","console","log","split","map","item","blob","test","File","type","get","then","res","data","productSize","i","onSubmit","preventDefault","config","headers","formData","FormData","imageArr","Array","from","forEach","image","append","sale","price","des","post","setCloseEditFunc","setToastFunc","addNewCate","cateName","current","deleteImg","virutalFile","splice","items","productName","files","length","URL","createObjectURL","fileArr","prototype","slice","call","height","overflowY","flexWrap","index","productPrice","width","productSale","productCate","margin","fontSize","fontFamily","fontWeight","padding","cursor","productSex","productDes","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport axios from 'axios'\n\nexport default function DashboardProductEdit(props) {\n\n    const createForm = useRef();\n    const cateInput = useRef();\n    const [isCheckedSmall, setIsCheckedSmall] = useState(false);\n    const [isCheckedMedium, setIsCheckedMedium] = useState(false);\n    const [isCheckedLarge, setIsCheckedLarge] = useState(false);\n    const [inputValue, setInputValue] = useState([])\n    const [cate, setCate] = useState([])\n    const [cateValue, setCateValue] = useState(\"\")\n    const [size, setSize] = useState([])\n    const [sex, setSex] = useState(\"\")\n    const [file, setFile] = useState([])\n    const product = props.product\n    const [productImg, setProductImg] = useState([])\n\n    const checkedSize = (event) => {\n        if (event.target.id === \"1\") {\n            if (isCheckedSmall) {\n                setIsCheckedSmall(false)\n            } else {\n                setSize(size=>[...size, 'Small'])\n                setIsCheckedSmall(true)\n            }\n        }\n        if (event.target.id === \"2\") {\n            if (isCheckedMedium) {\n                setIsCheckedMedium(false)\n            } else {\n                setSize(size=>[...size, 'Medium'])\n                setIsCheckedMedium(true)\n            }\n        }\n        if (event.target.id === \"3\") {\n            if (isCheckedLarge) {\n                setIsCheckedLarge(false)\n            } else {\n                setSize(size=>[...size, 'Large'])\n                setIsCheckedLarge(true)\n            }\n        }\n    }\n\n    const handleOnChange = (event) => {\n        setInputValue({...inputValue, [event.target.name]: event.target.value})\n    }\n    const dataURItoBlob = (dataURI) => {\n        if (dataURI) {\n            console.log(dataURI)\n            // var byteString = atob(dataURI.split(',')[1]);\n            console.log(dataURI.split(','))\n            // var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n            // var ab = new ArrayBuffer(byteString.length);\n            // var ia = new Uint8Array(ab);\n            // for (var i = 0; i < byteString.length; i++) {\n            //     ia[i] = byteString.charCodeAt(i);\n            // }\n            // return new Blob([ab], {type: mimeString});\n        }\n    }\n    \n    useEffect(()=> {\n        setProductImg(product.productImg)\n        if (product) {\n            if (product.productImg) {\n                product.productImg.map( async (item)=>{\n\n                    const blob = new blob();\n                    const test = new File([blob], 'image.jpg', {type: blob.type});\n                    console.log(test);\n\n                    // console.log(blob)\n                    // setFile(file=>[...file, URL.createObjectURL(item)])\n                })\n            }\n        }\n        axios.get(`http://localhost:4000/category`)\n            .then(res => {\n                setCate(res.data)\n            }\n        )\n        if (product) {\n            if (product.productSize) {\n                for (let i of product.productSize) {\n                    if(i === \"Small\") setIsCheckedSmall(true)\n                    if(i === \"Medium\") setIsCheckedMedium(true)\n                    if(i === \"Large\") setIsCheckedLarge(true)\n                }\n            }\n        }\n    },[product])\n\n    const onSubmit = (event) => {\n        event.preventDefault()\n        const config = {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        }\n        const formData = new FormData();\n        const imageArr = Array.from(file);\n        imageArr.forEach(image => {\n            formData.append('productImg', image);\n        });\n        formData.append(\"productName\", inputValue.name);\n        formData.append(\"productSale\", inputValue.sale);\n        formData.append(\"productPrice\", inputValue.price);\n        formData.append(\"productCate\", cateValue);\n        formData.append(\"productSize\", size);\n        formData.append(\"productDes\", inputValue.des);\n        formData.append(\"productSex\", sex);\n        axios.post(`http://localhost:4000/products/update`, formData, config)\n        props.setCloseEditFunc(false);\n        props.setToastFunc(true);\n    }\n\n    const addNewCate = () => {\n        axios.post('http://localhost:4000/category', {\n            cateName: inputValue.cate\n        })\n        setCate(cate=>[...cate, {cateName: inputValue.cate}])\n        setCateValue(inputValue.cate)\n        cateInput.current.value = \"\"\n    }\n\n    const deleteImg = (event) => {\n        const virutalFile = [...file]\n        virutalFile.splice(event.target.id, 1)\n        setFile(virutalFile)\n\n        const items = [...productImg]\n        items.splice(event.target.id, 1)\n        setProductImg(items)\n    }\n\n    // console.log(file)\n\n    return (\n        <div className=\"DashboardProductInfo\">\n            <div className=\"create-box\">\n                <div className=\"create-box-title flex\">\n                    <div className=\"create-box-title-text\">\n                        Product infomation\n                    </div>\n                    <div \n                        className=\"create-box-title-close flex-center\"\n                        onClick={()=>{\n                            props.setCloseEditFunc(false);\n                        }}\n                    >\n                        <FontAwesomeIcon icon={faTimes}/>\n                    </div>\n                </div>\n                { product && \n                    <form onSubmit={onSubmit} encType=\"multipart/form-data\" ref={createForm}>\n                        <div className=\"create-box-row flex\">\n                            <div className=\"dashboard-left flex\">Name</div>\n                            <div className=\"dashboard-right\">\n                                <input \n                                    type=\"text\" name=\"name\" \n                                    value={product.productName || 0}\n                                    onChange={handleOnChange} required></input>\n                            </div>\n                        </div>\n                        <div className=\"create-box-row flex\">\n                            <div className=\"dashboard-left flex\">Images </div>\n                            <div className=\"dashboard-right\">\n                                <input \n                                    onChange={(event) => {\n                                        const files = event.target.files;\n                                        for (let i = 0; i< files.length; i++) {\n                                            setProductImg(product=>[...product, URL.createObjectURL(files[i])])\n                                        }\n                                        const fileArr = Array.prototype.slice.call(files)\n                                        fileArr.forEach(item=>{\n                                            \n                                            setFile(file=>[...file, item])\n                                        })\n                                    }}\n                                    type=\"file\"\n                                    name=\"productImg\"\n                                    className=\"noborder\"\n                                    multiple=\"multiple\"\n                                    style={{height: '50px'}}\n                                ></input>\n                                <div className=\"flex\" style={{ overflowY: 'hidden', flexWrap:'wrap'}}>\n                                    { productImg && \n                                        productImg.map((item, index) => {\n                                            return (\n                                                <div className=\"create-box-img\">\n                                                    <img key={index} src={item} alt=\"\"></img>\n                                                    <div \n                                                        className=\"create-box-img-overlay\"\n                                                    >\n                                                        <p\n                                                            id={index}\n                                                            onClick={deleteImg}\n                                                            className=\"icon\">X\n                                                        </p>\n                                                    </div>\n                                                </div>\n                                            )\n                                        })\n                                    }\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"create-box-row flex\">\n                            <div className=\"dashboard-left flex\">Defaut price </div>\n                            <div className=\"dashboard-right\">\n                                <input \n                                    type=\"number\" name=\"price\" \n                                    placeholder=\"USD\" \n                                    value={product.productPrice || 0}\n                                    onChange={handleOnChange} required\n                                ></input>\n                            </div>\n                        </div>\n                        <div className=\"create-box-row flex\">\n                            <div className=\"dashboard-left flex\">Sale </div>\n                            <div className=\"dashboard-right flex-center\">\n                                <input \n                                    type=\"number\" placeholder=\"%\" \n                                    style={{ width: \"100px\"}} \n                                    onChange={handleOnChange} \n                                    name=\"sale\" \n                                    value={product.productSale || 0}\n                                    required></input>\n                                <label>From: </label>\n                                <input type=\"date\"  name=\"fromdate\" onChange={handleOnChange} placeholder=\"dd/mm/yyyy\" pattern=\"(^(((0[1-9]|1[0-9]|2[0-8])[\\/](0[1-9]|1[012]))|((29|30|31)[\\/](0[13578]|1[02]))|((29|30)[\\/](0[4,6,9]|11)))[\\/](19|[2-9][0-9])\\d\\d$)|(^29[\\/]02[\\/](19|[2-9][0-9])(00|04|08|12|16|20|24|28|32|36|40|44|48|52|56|60|64|68|72|76|80|84|88|92|96)$)\"/>\n                                <label>To: </label>\n                                <input type=\"date\"  name=\"todate\" onChange={handleOnChange} placeholder=\"dd/mm/yyyy\" pattern=\"(^(((0[1-9]|1[0-9]|2[0-8])[\\/](0[1-9]|1[012]))|((29|30|31)[\\/](0[13578]|1[02]))|((29|30)[\\/](0[4,6,9]|11)))[\\/](19|[2-9][0-9])\\d\\d$)|(^29[\\/]02[\\/](19|[2-9][0-9])(00|04|08|12|16|20|24|28|32|36|40|44|48|52|56|60|64|68|72|76|80|84|88|92|96)$)\"/>\n                            </div>\n                        </div>\n                        <div className=\"create-box-row flex\">\n                            <div className=\"dashboard-left flex\">Category </div>\n                            <div className=\"dashboard-right flex-center\">\n                                <select style={{ width: \"350px\"}} \n                                    onChange={(event) => {setCateValue(event.target.value)}}\n                                    value={cateValue || product.productCate}\n                                >\n                                    <option></option>\n                                    { cate.length > 0 &&\n                                        cate.map((item, index) => {\n                                            return(\n                                                <option key={index}>{item.cateName}</option>\n                                            )\n                                        })\n                                    }\n                                </select>\n                                <input type=\"text\" name=\"cate\" placeholder=\"New category?\" style={{  margin:'0 10px'}} onChange={handleOnChange} ref={cateInput}></input>\n                                <div className=\"btn\" style={{\n                                    fontSize: '14px',\n                                    fontFamily: 'sans-serif',\n                                    fontWeight: '300',\n                                    padding: '0 10px',\n                                    cursor: 'pointer',\n                                    width: '350px',\n                                    height: '30px'\n                                }}\n                                onClick={addNewCate}>\n                                    Add new category\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"create-box-row flex\">\n                            <div className=\"dashboard-left flex\">Sex </div>\n                            <div className=\"dashboard-right flex\">\n                                <select style={{ width: \"200px\"}} \n                                    onChange={(event) => {setSex(event.target.value)}}\n                                    value={sex || product.productSex}\n                                    required>\n                                    <option></option>\n                                    <option>Man</option>\n                                    <option>Woman</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div className=\"create-box-row flex\">\n                            <div className=\"dashboard-left flex\">Size </div>\n                            <div className=\"dashboard-right flex\">\n                                <div \n                                    className={isCheckedSmall ? \"size-check isChecked\" : \"size-check\"}\n                                    id=\"1\" \n                                    onClick={checkedSize}>Small</div>\n                                <div \n                                    className={isCheckedMedium ? \"size-check isChecked\" : \"size-check\"}\n                                    id=\"2\" \n                                    onClick={checkedSize}>Medium</div>\n                                <div \n                                    className={isCheckedLarge ? \"size-check isChecked\" : \"size-check\"}\n                                    id=\"3\" \n                                    onClick={checkedSize}>Large</div>\n                            </div>\n                        </div>\n                        <div className=\"create-box-row flex\">\n                            <div className=\"dashboard-left flex\">Description </div>\n                            <div className=\"dashboard-right\">\n                                <input \n                                    type=\"text\" \n                                    name=\"des\" \n                                    value={product.productDes || \"\"}\n                                    onChange={handleOnChange} required></input>\n                            </div>\n                        </div>\n\n                        <div className=\"flex-center\" style={{marginTop: '40px'}}>\n                            <button className=\"create-box-btn btn\">\n                                Update product\n                            </button>\n                        </div>\n                    </form>\n                }\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}