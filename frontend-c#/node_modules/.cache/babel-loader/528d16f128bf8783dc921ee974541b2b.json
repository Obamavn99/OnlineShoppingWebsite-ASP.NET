{"ast":null,"code":"var _jsxFileName = \"/Users/namduong/Projects/frontend-c#/src/components/admin/Dashboard/Collection/DashboardCollectionEdit.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\nexport default function DashboardCollectionEdit(props) {\n  const createForm = useRef();\n  const [collectionName, setCollectionName] = useState(\"\");\n  const [collectionBanner, setCollectionBanner] = useState([]);\n  const [product, setProduct] = useState([]);\n  const [productList, setProductList] = useState([]);\n  const [file, setFile] = useState([]);\n  const collection = props.collection;\n  useEffect(() => {\n    axios.get(`https://localhost:4000/api/product`).then(res => {\n      setProduct(res.data);\n    });\n\n    if (collection) {\n      setCollectionBanner([collection.collectionBanner]);\n      setCollectionName(collection.collectionName);\n\n      for (let i in collection.collectionItems) {\n        axios.get(`https://localhost:4000/api/product/${collection.collectionItems[i]}`).then(res => {\n          setProductList(productList => [...productList, res.data]);\n        });\n      }\n    }\n\n    return () => {\n      setProductList([]);\n    };\n  }, [collection]);\n\n  const onSubmit = event => {\n    event.preventDefault();\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    const formData = new FormData();\n    formData.append('file', file[0]);\n    let collectionItems = [];\n\n    for (let i in productList) {\n      collectionItems.push(productList[i].id);\n    }\n\n    axios.post('https://localhost:4000/api/collection/UploadFile', formData, config).then(res => {\n      console.log(res.data);\n      axios.put(`https://localhost:4000/api/collection/${collection.id}`, {\n        id: collection.id,\n        collectionName: collectionName,\n        collectionItems: collectionItems,\n        collectionTime: new Date(),\n        collectionBanner: res.data\n      }).then(() => {\n        props.setCloseCreateFunc(false);\n        props.setToastFunc(true);\n      }).catch(err => {\n        console.log(err);\n      });\n    }).catch(res => {\n      console.log(res);\n    });\n  };\n\n  const deleteImg = event => {\n    const virutalFile = [...file];\n    virutalFile.splice(event.target.id, 1);\n    setFile(virutalFile);\n    const items = [...collectionBanner];\n    items.splice(event.target.id, 1);\n    setCollectionBanner(items);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"DashboardProductInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, \"Order infomation\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-close flex-center\",\n    onClick: () => {\n      props.setCloseEditFunc(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTimes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    encType: \"multipart/form-data\",\n    ref: createForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    value: collectionName || \"\",\n    onChange: event => {\n      setCollectionName(event.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, \"Collection Banner \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: event => {\n      const files = event.target.files;\n\n      for (let i = 0; i < files.length; i++) {\n        setCollectionBanner(news => [...news, URL.createObjectURL(files[i])]);\n      }\n\n      const fileArr = Array.prototype.slice.call(files);\n      fileArr.forEach(item => {\n        setFile(file => [...file, item]);\n      });\n    },\n    type: \"file\",\n    className: \"noborder\",\n    multiple: \"multiple\",\n    style: {\n      height: '50px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    style: {\n      overflowY: 'hidden',\n      flexWrap: 'wrap'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 29\n    }\n  }, collectionBanner && collectionBanner.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"create-box-img\",\n      style: {\n        width: '130px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      key: index,\n      src: item,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 49\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-box-img-overlay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      id: index,\n      onClick: deleteImg,\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 53\n      }\n    }, \"X\")));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 25\n    }\n  }, \"Items\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"input\",\n    style: {\n      height: '25px',\n      marginBottom: '10px'\n    },\n    value: \"\",\n    onChange: event => {\n      const isExists = (cartItems = [], item = {}) => {\n        for (let cartItem of cartItems) {\n          if (cartItem.id === item.id) {\n            return cartItem;\n          }\n        }\n\n        return false;\n      };\n\n      const value = event.target.value;\n      const virtualCart = [...productList];\n\n      if (productList.length === 0) {\n        virtualCart.push({ ...JSON.parse(value),\n          count: 1\n        });\n      } else {\n        if (!isExists(productList, JSON.parse(value))) {\n          virtualCart.push({ ...JSON.parse(value),\n            count: 1\n          });\n        } else {\n          for (let i = 0; i < virtualCart.length; i++) {\n            if (virtualCart[i].id === JSON.parse(value).id) {\n              virtualCart[i].count += 1;\n              break;\n            }\n          }\n        }\n      }\n\n      setProductList(virtualCart);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    selected: true,\n    value: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 33\n    }\n  }, \"select a product\"), product.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      value: JSON.stringify(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 41\n      }\n    }, \"Name: \", item.productName, \", Price: \", item.productFinalPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\"));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    style: {\n      overflowY: 'hidden',\n      flexWrap: 'wrap'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 29\n    }\n  }, productList && productList.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"order-list-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item.productImg[0],\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 49\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        width: '55%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 49\n      }\n    }, item.productName), /*#__PURE__*/React.createElement(\"div\", {\n      id: index,\n      className: \"delete-order-item flex-center\",\n      onClick: event => {\n        var arr = [];\n        const id = event.target.id;\n\n        for (let i in productList) {\n          if (i !== id) {\n            arr.push(productList[i]);\n          }\n        }\n\n        setProductList(arr);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      style: {\n        pointerEvents: 'none'\n      },\n      icon: faTimes,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 53\n      }\n    })));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-center\",\n    style: {\n      marginTop: '40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"create-box-btn btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 25\n    }\n  }, \"Update collection\")))));\n}","map":{"version":3,"sources":["/Users/namduong/Projects/frontend-c#/src/components/admin/Dashboard/Collection/DashboardCollectionEdit.js"],"names":["React","useEffect","useRef","useState","FontAwesomeIcon","faTimes","axios","DashboardCollectionEdit","props","createForm","collectionName","setCollectionName","collectionBanner","setCollectionBanner","product","setProduct","productList","setProductList","file","setFile","collection","get","then","res","data","i","collectionItems","onSubmit","event","preventDefault","config","headers","formData","FormData","append","push","id","post","console","log","put","collectionTime","Date","setCloseCreateFunc","setToastFunc","catch","err","deleteImg","virutalFile","splice","target","items","setCloseEditFunc","value","files","length","news","URL","createObjectURL","fileArr","Array","prototype","slice","call","forEach","item","height","overflowY","flexWrap","map","index","width","marginBottom","isExists","cartItems","cartItem","virtualCart","JSON","parse","count","stringify","productName","productFinalPrice","toString","replace","productImg","arr","pointerEvents","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport axios from 'axios'\n\nexport default function DashboardCollectionEdit(props) {\n\n    const createForm = useRef();\n\n    const [collectionName, setCollectionName] = useState(\"\")\n    const [collectionBanner, setCollectionBanner] = useState([])\n    const [product, setProduct] = useState([])\n    const [productList, setProductList] = useState([])\n    const [file, setFile] = useState([])\n\n    const collection = props.collection\n\n    useEffect(()=>{\n        axios.get(`https://localhost:4000/api/product`)\n            .then(res => {\n                setProduct(res.data)\n            }\n        )\n        if (collection) {\n            setCollectionBanner([collection.collectionBanner])\n            setCollectionName(collection.collectionName)\n\n            for (let i in collection.collectionItems) {\n                axios.get(`https://localhost:4000/api/product/${collection.collectionItems[i]}`)\n                .then((res)=>{\n                    setProductList(productList=> [...productList, res.data])\n                })\n            }\n        }\n        return(()=>{\n            setProductList([])\n        })\n    },[collection]) \n\n    const onSubmit = (event) => {\n        event.preventDefault()\n\n        const config = {\n            headers: {\n               'content-type': 'multipart/form-data',\n            },\n        };\n\n        const formData = new FormData();\n        formData.append('file', file[0]);\n \n        let collectionItems = []\n        for (let i in productList) {\n            collectionItems.push(productList[i].id)\n        }  \n \n        axios.post('https://localhost:4000/api/collection/UploadFile', formData, config)\n        .then((res)=>{   \n            console.log(res.data)\n            axios.put(`https://localhost:4000/api/collection/${collection.id}`, {\n                id: collection.id,\n                collectionName: collectionName,\n                collectionItems: collectionItems,\n                collectionTime: new Date(),\n                collectionBanner: res.data\n            }).then(()=>{  \n                props.setCloseCreateFunc(false);\n                props.setToastFunc(true);\n            }).catch((err)=>{\n                console.log(err)\n            })\n        }).catch((res)=>{\n            console.log(res)\n        })\n    }\n\n    const deleteImg = (event) => {\n        const virutalFile = [...file]\n        virutalFile.splice(event.target.id, 1)\n        setFile(virutalFile)\n\n        const items = [...collectionBanner]\n        items.splice(event.target.id, 1)\n        setCollectionBanner(items)\n    }\n\n    return (\n        <div className=\"DashboardProductInfo\">\n            <div className=\"create-box\"> \n                <div className=\"create-box-title flex\">\n                    <div className=\"create-box-title-text\">\n                        Order infomation\n                    </div>\n                    <div  \n                        className=\"create-box-title-close flex-center\"\n                        onClick={()=>{\n                            props.setCloseEditFunc(false);\n                        }}\n                    >\n                        <FontAwesomeIcon icon={faTimes}/>\n                    </div>\n                </div>\n                <form onSubmit={onSubmit} encType=\"multipart/form-data\" ref={createForm}>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Name</div>\n                        <div className=\"dashboard-right\">\n                            <input \n                                type=\"text\" name=\"name\" \n                                value={collectionName || \"\"}\n                                onChange={(event)=>{\n                                    setCollectionName(event.target.value)\n                                }} required\n                            ></input>\n                        </div>\n                    </div>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Collection Banner </div>\n                        <div className=\"dashboard-right\">\n                            <input \n                                onChange={(event) => {\n                                    const files = event.target.files;\n                                    for (let i = 0; i< files.length; i++) {\n                                        setCollectionBanner(news=>[...news, URL.createObjectURL(files[i])])\n                                    }\n                                    const fileArr = Array.prototype.slice.call(files)\n                                    fileArr.forEach(item=>{\n                                        setFile(file=>[...file, item])\n                                    })\n                                }}\n                                type=\"file\"\n                                className=\"noborder\"\n                                multiple=\"multiple\"\n                                style={{height: '50px'}}\n                            ></input>\n                            <div className=\"flex\" style={{ overflowY: 'hidden', flexWrap:'wrap'}}>\n                                { collectionBanner && \n                                    collectionBanner.map((item, index) => {\n                                        return (\n                                            <div key={index} className=\"create-box-img\" style={{width: '130px'}}>\n                                                <img key={index} src={item} alt=\"\"></img>\n                                                <div \n                                                    className=\"create-box-img-overlay\"\n                                                >\n                                                    <p\n                                                        id={index}\n                                                        onClick={deleteImg}\n                                                        className=\"icon\">X\n                                                    </p>\n                                                </div>\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Items</div>\n                        <div className=\"dashboard-right\">\n                            <select \n                                className=\"input\"\n                                style={{height: '25px', marginBottom: '10px'}}\n                                value={\"\"}\n                                onChange={(event)=>{\n                                    const isExists = (cartItems = [], item = {}) => {\n                                        for (let cartItem of cartItems) {\n                                            if (cartItem.id === item.id) {\n                                                return cartItem;\n                                            }\n                                        }\n                                        return false;\n                                    }\n\n                                    const value = event.target.value\n                                    const virtualCart = [...productList] \n                                    if (productList.length === 0) {\n                                        virtualCart.push({...JSON.parse(value), count: 1})\n                                    } else {\n                                        if (!isExists(productList, JSON.parse(value))) {\n                                            virtualCart.push({...JSON.parse(value), count: 1})\n                                        } else {\n                                            for (let i = 0; i < virtualCart.length; i++) {\n                                                if (virtualCart[i].id === JSON.parse(value).id) {\n                                                    virtualCart[i].count += 1\n                                                    break\n                                                }\n                                            }\n                                        }\n                                    }\n                                    setProductList(virtualCart)\n                                }}\n                            >\n                                <option selected value>select a product</option>\n                                {product.map((item, index) => {\n                                    return (\n                                        <option\n                                            key={index}\n                                            value={JSON.stringify(item)}\n                                        >Name: {item.productName}, Price: {item.productFinalPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")}</option>\n                                    )\n                                })}\n                            </select>\n                            <div className=\"\" style={{ overflowY: 'hidden', flexWrap:'wrap'}}>\n                                { productList && \n                                    productList.map((item, index) => {\n                                        return (\n                                            <div \n                                                key={index}\n                                                className=\"order-list-item\"\n                                            >\n                                                <img src={item.productImg[0]} alt=\"\"></img>\n                                                <p style={{width: '55%'}}>{item.productName}</p>\n                                                <div \n                                                    id={index}\n                                                    className=\"delete-order-item flex-center\"\n                                                    onClick={(event)=>{\n                                                        var arr = [];\n                                                        const id = event.target.id;\n                                                        for (let i in productList) {\n                                                            if (i !== id) {\n                                                                arr.push(productList[i])\n                                                            }\n                                                        }\n                                                        setProductList(arr)\n                                                    }}>\n                                                    <FontAwesomeIcon style={{pointerEvents: 'none'}} icon={faTimes}/>\n                                                </div>\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </div>\n                        </div>\n                    </div> \n                    <div className=\"flex-center\" style={{marginTop: '40px'}}>\n                        <button className=\"create-box-btn btn\">\n                            Update collection\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}