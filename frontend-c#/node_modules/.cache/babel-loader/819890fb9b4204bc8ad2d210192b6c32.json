{"ast":null,"code":"var _jsxFileName = \"/Users/namduong/Projects/frontend-c#/src/components/admin/Dashboard/News/DashboardNewsEdit.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\nimport DashboardEditor from './DashboardEditor';\nexport default function DashboardNewsCreate(props) {\n  const createForm = useRef();\n  const cateInput = useRef();\n  const [inputValue, setInputValue] = useState([]);\n  const [file, setFile] = useState([]);\n  const [cateList, setCateList] = useState([]);\n  const news = props.news;\n\n  const handleOnChange = event => {\n    setInputValue({ ...inputValue,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const [newsTitle, setNewsTitle] = useState(\"\");\n  const [newsImg, setNewsImg] = useState([]);\n  const [newsCate, setNewsCate] = useState(\"\");\n  const [newsContent, setNewsContent] = useState(\"\");\n  const [newsTime, setNewsTime] = useState(\"\");\n  const [newsView, setNewsView] = useState(\"\");\n  useEffect(() => {\n    if (news) {\n      setNewsTitle(news.newTitle);\n      setNewsImg([news.newImg]);\n      setNewsCate(news.newCate);\n      setNewsContent(news.newContent);\n      axios.get(`https://localhost:4000/api/news`).then(res => {\n        const test = Object.values(res.data.reduce((a, {\n          newCate\n        }) => {\n          a[newCate] = a[newCate] || {\n            newCate\n          };\n          return a;\n        }, Object.create(null)));\n        setCateList(test);\n      });\n    }\n  }, [news]);\n\n  const onSubmit = event => {\n    event.preventDefault();\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    const formData = new FormData();\n    formData.append('file', file[0]);\n\n    if (file[0]) {\n      axios.post('https://localhost:4000/api/news/UploadFile', formData, config).then(res => {\n        axios.put(`https://localhost:4000/api/news/${news.id}`, {\n          id: news.id,\n          newImg: res.data,\n          newTime: newsTime,\n          newCate: newsCate,\n          newTitle: newsTitle,\n          newContent: newsContent,\n          newView: newsView\n        }).then(() => {\n          props.setCloseEditFunc(false);\n          props.setToastFunc(true);\n        }).catch(err => {\n          console.log(err);\n        });\n      }).catch(res => {\n        console.log(res);\n      });\n    } else {\n      axios.put(`https://localhost:4000/api/news/${news.id}`, {\n        id: news.id,\n        newImg: res.data,\n        newTime: newsTime,\n        newCate: newsCate,\n        newTitle: newsTitle,\n        newContent: newsContent,\n        newView: newsView\n      }).then(() => {\n        props.setCloseEditFunc(false);\n        props.setToastFunc(true);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n\n  const addNewCate = () => {\n    setCateList(cateList => [...cateList, {\n      newCate: inputValue.cate\n    }]);\n    cateInput.current.value = \"\";\n  };\n\n  const deleteImg = event => {\n    const id = event.target.id;\n    const virutalFile = [...file];\n    virutalFile.splice(id, 1);\n    setFile(virutalFile);\n    const items = [...newsImg];\n    items.splice(id, 1);\n    setNewsImg(items);\n    axios.post(`https://localhost:4000/api/news/update/${news.id}`, {\n      deleteImgId: id\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"DashboardProductInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }, \"News infomation\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-close flex-center\",\n    onClick: () => {\n      props.setCloseEditFunc(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTimes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    encType: \"multipart/form-data\",\n    ref: createForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"title\",\n    value: newsTitle || \"\",\n    onChange: event => {\n      setNewsTitle(event.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }, \"Images \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: event => {\n      const files = event.target.files;\n\n      for (let i = 0; i < files.length; i++) {\n        setNewsImg(news => [...news, URL.createObjectURL(files[i])]);\n      }\n\n      setFile(event.target.files);\n    },\n    type: \"file\",\n    name: \"newsImg\",\n    className: \"noborder\",\n    multiple: \"multiple\",\n    style: {\n      height: '50px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    style: {\n      overflowY: 'hidden',\n      flexWrap: 'wrap'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 29\n    }\n  }, newsImg && newsImg.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"create-box-img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      key: index,\n      src: item,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 49\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-box-img-overlay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      id: index,\n      onClick: deleteImg,\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 53\n      }\n    }, \"X\")));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 25\n    }\n  }, \"Category \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    style: {\n      width: \"350px\"\n    },\n    onChange: event => {\n      setNewsCate(event.target.value);\n    },\n    value: newsCate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 33\n    }\n  }), cateList.length > 0 && cateList.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 45\n      }\n    }, item.newCate);\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"cate\",\n    placeholder: \"New category?\",\n    style: {\n      margin: '0 10px'\n    },\n    onChange: handleOnChange,\n    ref: cateInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn\",\n    style: {\n      fontSize: '14px',\n      fontFamily: 'sans-serif',\n      fontWeight: '300',\n      padding: '0 10px',\n      cursor: 'pointer',\n      width: '350px',\n      height: '30px'\n    },\n    onClick: addNewCate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 29\n    }\n  }, \"Add\"))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: '1px #ddd solid'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(DashboardEditor, {\n    newsContent: newsContent,\n    setNewsContent: setNewsContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-center\",\n    style: {\n      marginTop: '40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"create-box-btn btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 21\n    }\n  }, \"Edit news\")))));\n}","map":{"version":3,"sources":["/Users/namduong/Projects/frontend-c#/src/components/admin/Dashboard/News/DashboardNewsEdit.js"],"names":["React","useEffect","useRef","useState","FontAwesomeIcon","faTimes","axios","DashboardEditor","DashboardNewsCreate","props","createForm","cateInput","inputValue","setInputValue","file","setFile","cateList","setCateList","news","handleOnChange","event","target","name","value","newsTitle","setNewsTitle","newsImg","setNewsImg","newsCate","setNewsCate","newsContent","setNewsContent","newsTime","setNewsTime","newsView","setNewsView","newTitle","newImg","newCate","newContent","get","then","res","test","Object","values","data","reduce","a","create","onSubmit","preventDefault","config","headers","formData","FormData","append","post","put","id","newTime","newView","setCloseEditFunc","setToastFunc","catch","err","console","log","addNewCate","cate","current","deleteImg","virutalFile","splice","items","deleteImgId","files","i","length","URL","createObjectURL","height","overflowY","flexWrap","map","item","index","width","margin","fontSize","fontFamily","fontWeight","padding","cursor","border","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport axios from 'axios'\nimport DashboardEditor from './DashboardEditor';\n\nexport default function DashboardNewsCreate(props) {\n\n    const createForm = useRef();\n    const cateInput = useRef();\n    const [inputValue, setInputValue] = useState([])\n    const [file, setFile] = useState([])\n    const [cateList, setCateList] = useState([])\n    const news = props.news;\n    \n    const handleOnChange = (event) => {\n        setInputValue({...inputValue, [event.target.name]: event.target.value})\n    }\n\n    const [newsTitle, setNewsTitle] = useState(\"\")\n    const [newsImg, setNewsImg] = useState([])\n    const [newsCate, setNewsCate] = useState(\"\")\n    const [newsContent, setNewsContent] = useState(\"\")\n    const [newsTime, setNewsTime] = useState(\"\")\n    const [newsView, setNewsView] = useState(\"\")\n\n    useEffect(()=> {\n        if (news) {\n            setNewsTitle(news.newTitle)\n            setNewsImg([news.newImg])\n            setNewsCate(news.newCate)\n            setNewsContent(news.newContent)\n            axios.get(`https://localhost:4000/api/news`)\n                .then(res => {\n                    const test = Object.values(res.data.reduce((a, {newCate}) => {\n                        a[newCate] = a[newCate] || {newCate};\n                        return a;\n                    }, Object.create(null)));\n                    setCateList(test)\n                }\n            )\n        }\n    },[news])\n\n    const onSubmit = (event) => {\n        event.preventDefault()\n        const config = {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        }  \n\n        const formData = new FormData();\n        formData.append('file', file[0]);\n \n        if (file[0]) { \n            axios.post('https://localhost:4000/api/news/UploadFile', formData, config)\n            .then((res)=>{    \n                axios.put(`https://localhost:4000/api/news/${news.id}`, {\n                    id: news.id,\n                    newImg: res.data,\n                    newTime: newsTime,\n                    newCate: newsCate,\n                    newTitle: newsTitle,\n                    newContent: newsContent, \n                    newView: newsView\n                }).then(()=>{  \n                    props.setCloseEditFunc(false);\n                    props.setToastFunc(true);\n                }).catch((err)=>{\n                    console.log(err)\n                })\n            }).catch((res)=>{\n                console.log(res) \n            })\n        } else {  \n            axios.put(`https://localhost:4000/api/news/${news.id}`, {\n                id: news.id,\n                newImg: res.data,\n                newTime: newsTime,\n                newCate: newsCate,\n                newTitle: newsTitle,\n                newContent: newsContent, \n                newView: newsView\n            }).then(()=>{  \n                props.setCloseEditFunc(false);\n                props.setToastFunc(true);\n            }).catch((err)=>{\n                console.log(err)\n            }) \n        }\n    }\n\n    const addNewCate = () => {\n        setCateList(cateList => [...cateList, {newCate: inputValue.cate}])\n        cateInput.current.value = \"\"\n    }\n\n    const deleteImg = (event) => {\n        const id = event.target.id\n        const virutalFile = [...file]\n        virutalFile.splice(id, 1)\n        setFile(virutalFile)\n\n        const items = [...newsImg]\n        items.splice(id, 1)\n        setNewsImg(items)\n        axios.post(`https://localhost:4000/api/news/update/${news.id}`, {\n            deleteImgId: id\n        })\n    }\n\n    return (\n        <div className=\"DashboardProductInfo\">\n            <div className=\"create-box\"> \n                <div className=\"create-box-title flex\">\n                    <div className=\"create-box-title-text\">\n                        News infomation\n                    </div>\n                    <div  \n                        className=\"create-box-title-close flex-center\"\n                        onClick={()=>{\n                            props.setCloseEditFunc(false);\n                        }}\n                    >\n                        <FontAwesomeIcon icon={faTimes}/>\n                    </div>\n                </div>\n                <form onSubmit={onSubmit} encType=\"multipart/form-data\" ref={createForm}>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Title</div>\n                        <div className=\"dashboard-right\">\n                            <input \n                                type=\"text\" name=\"title\" \n                                value={newsTitle || \"\"}\n                                onChange={(event)=>{\n                                    setNewsTitle(event.target.value)\n                                }} required\n                                ></input>\n                        </div>\n                    </div>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Images </div>\n                        <div className=\"dashboard-right\">\n                            <input \n                                onChange={(event) => {\n                                    const files = event.target.files;\n                                    for (let i = 0; i< files.length; i++) {\n                                        setNewsImg(news=>[...news, URL.createObjectURL(files[i])])\n                                    }  \n                                    setFile(event.target.files) \n                                }}\n                                type=\"file\"\n                                name=\"newsImg\"\n                                className=\"noborder\"\n                                multiple=\"multiple\"\n                                style={{height: '50px'}}\n                            ></input>\n                            <div className=\"flex\" style={{ overflowY: 'hidden', flexWrap:'wrap'}}>\n                                { newsImg && \n                                    newsImg.map((item, index) => {\n                                        return (\n                                            <div key={index} className=\"create-box-img\">\n                                                <img key={index} src={item} alt=\"\"></img>\n                                                <div \n                                                    className=\"create-box-img-overlay\"\n                                                >\n                                                    <p\n                                                        id={index}\n                                                        onClick={deleteImg}\n                                                        className=\"icon\">X\n                                                    </p>\n                                                </div>\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"create-box-row flex\">\n                        <div className=\"dashboard-left flex\">Category </div>\n                        <div className=\"dashboard-right flex-center\">\n                            <select style={{ width: \"350px\"}} \n                                onChange={(event) => {setNewsCate(event.target.value)}}\n                                value={newsCate}\n                            >\n                                <option></option>\n                                { cateList.length > 0 &&\n                                    cateList.map((item, index) => {\n                                        return(\n                                            <option key={index}>{item.newCate}</option>\n                                        )\n                                    })\n                                }\n                            </select>\n                            <input type=\"text\" name=\"cate\" placeholder=\"New category?\" style={{  margin:'0 10px'}} onChange={handleOnChange} ref={cateInput}></input>\n                            <div className=\"btn\" style={{\n                                fontSize: '14px',\n                                fontFamily: 'sans-serif',\n                                fontWeight: '300',\n                                padding: '0 10px',\n                                cursor: 'pointer',\n                                width: '350px',\n                                height: '30px'\n                            }}\n                            onClick={addNewCate}>\n                                Add\n                            </div>\n                        </div>\n                    </div>\n                    <div style={{border: '1px #ddd solid'}}>\n                        <DashboardEditor\n                            newsContent = {newsContent}\n                            setNewsContent= {setNewsContent}\n                        />\n                    </div>\n                    <div className=\"flex-center\" style={{marginTop: '40px'}}>\n                    <button className=\"create-box-btn btn\">\n                        Edit news\n                    </button>\n                </div>\n                </form>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}