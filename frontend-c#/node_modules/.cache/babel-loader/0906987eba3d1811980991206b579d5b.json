{"ast":null,"code":"var _jsxFileName = \"/Users/namduong/Documents/dev/shop-project/frontend/src/components/admin/Dashboard/Product/DashboardProductTable.js\";\nimport React, { useEffect, useState } from 'react';\nimport '../../../../App.css';\nimport '../../../../Styles/Dashboard.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport ReactStars from \"react-rating-stars-component\";\nimport { faLongArrowAltDown, faPencilAlt, faSort, faTimes } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\nimport classNames from 'classnames';\nexport default function DashboardProductTable(props) {\n  const [products, setProducts] = useState([]);\n  const [constProducts, setConstProducts] = useState([]);\n  const [isSortByName, setIsSortByName] = useState(false);\n  const [isSortByPrice, setIsSortByPrice] = useState(false);\n  const [isSortBySale, setIsSortBySale] = useState(false);\n  const [isSortBySold, setIsSortBySold] = useState(false);\n  useEffect(() => {\n    axios.get(`http://localhost:4000/products`).then(res => {\n      setProducts(res.data);\n      setConstProducts(res.data);\n    });\n  }, [props.isChange]);\n\n  const deleteOnClick = event => {\n    axios.post(`http://localhost:4000/products/delete/:${event.target.id}`, {\n      productId: event.target.id\n    });\n    setProducts(products.filter(item => {\n      return item._id !== event.target.id;\n    }));\n  };\n\n  const searchOnSubmit = event => {\n    event.preventDefault();\n  };\n\n  const searchOnChange = event => {\n    // setSearchInput(event.target.value)\n    const searchInput = event.target.value;\n    const search = [];\n\n    for (let i in constProducts) {\n      if (constProducts[i].productName.toLowerCase().includes(searchInput)) {\n        search.push(constProducts[i]);\n      }\n    }\n\n    setProducts(search);\n  };\n\n  const sortTable = event => {\n    if (event.target.id === \"Name\") {\n      if (isSortByName) {\n        const sortByName = [...products];\n        sortByName.sort(function (a, b) {\n          var nameA = a.productName.toLowerCase();\n          var nameB = b.productName.toLowerCase();\n          if (nameA === nameB) return 0;\n          return nameA > nameB ? 1 : -1;\n        });\n        setIsSortByName(false);\n        setProducts(sortByName);\n      } else {\n        const sortByName = [...products];\n        sortByName.sort(function (a, b) {\n          var nameA = a.productName.toLowerCase();\n          var nameB = b.productName.toLowerCase();\n          if (nameA === nameB) return 0;\n          return nameA < nameB ? 1 : -1;\n        });\n        setIsSortByName(true);\n        setProducts(sortByName);\n      }\n    }\n\n    if (event.target.id === \"Price\") {\n      if (isSortByPrice) {\n        const sortByName = [...products];\n        sortByName.sort(function (a, b) {\n          var nameA = a.productName;\n          var nameB = b.productName;\n          if (nameA === nameB) return 0;\n          return nameA > nameB ? 1 : -1;\n        });\n        setIsSortByPrice(false);\n        setProducts(sortByName);\n      } else {\n        const sortByName = [...products];\n        sortByName.sort(function (a, b) {\n          var nameA = a.productName;\n          var nameB = b.productName;\n          if (nameA === nameB) return 0;\n          return nameA < nameB ? 1 : -1;\n        });\n        setIsSortByPrice(true);\n        setProducts(sortByName);\n      }\n    }\n\n    if (event.target.id === \"Sale\") {\n      if (isSortBySale) {\n        const sortByName = [...products];\n        sortByName.sort(function (a, b) {\n          var nameA = a.productName;\n          var nameB = b.productName;\n          if (nameA === nameB) return 0;\n          return nameA > nameB ? 1 : -1;\n        });\n        setIsSortBySale(false);\n        setProducts(sortByName);\n      } else {\n        const sortByName = [...products];\n        sortByName.sort(function (a, b) {\n          var nameA = a.productName;\n          var nameB = b.productName;\n          if (nameA === nameB) return 0;\n          return nameA < nameB ? 1 : -1;\n        });\n        setIsSortBySale(true);\n        setProducts(sortByName);\n      }\n    }\n\n    if (event.target.id === \"Sold\") {\n      if (isSortBySold) {\n        const sortByName = [...products];\n        sortByName.sort(function (a, b) {\n          var nameA = a.productName;\n          var nameB = b.productName;\n          if (nameA === nameB) return 0;\n          return nameA > nameB ? 1 : -1;\n        });\n        setIsSortBySold(false);\n        setProducts(sortByName);\n      } else {\n        const sortByName = [...products];\n        sortByName.sort(function (a, b) {\n          var nameA = a.productName;\n          var nameB = b.productName;\n          if (nameA === nameB) return 0;\n          return nameA < nameB ? 1 : -1;\n        });\n        setIsSortBySold(true);\n        setProducts(sortByName);\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"topfive flex-col\",\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `headerbox flex-center ${props.color}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: props.icon,\n    className: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"top-location-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"headerbox-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, props.title)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"topfive-content flex-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-addnew flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-addnew-btn btn\",\n    onClick: props.setOpenCreateFunc,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 25\n    }\n  }, \"Add new\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-addnew-search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: searchOnSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search records\",\n    onChange: searchOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 33\n    }\n  })))), /*#__PURE__*/React.createElement(\"table\", {\n    className: \"dashboard-table\",\n    style: {\n      tableLayout: 'fixed'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 29\n    }\n  }, props.table.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"th\", {\n      key: index,\n      className: \"table-title\",\n      onClick: event => {\n        sortTable(event);\n      },\n      id: item,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 45\n      }\n    }, item);\n  })), products.map((item, index) => {\n    const date = new Date(item.productDate);\n    const day = date.getDay();\n    const month = date.getMonth();\n    const year = date.getFullYear();\n    const shortedDate = day + '/' + month + '/' + year; //Counting star vote\n\n    const ratingList = item.productVote.map(a => a.ratingStar); // get all rating\n\n    const totalRating = ratingList.reduce((a, b) => a + b, 0);\n    const averageRating = totalRating / ratingList.length;\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      className: \"table-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 49\n      }\n    }, item.productName)), /*#__PURE__*/React.createElement(\"td\", {\n      style: {\n        display: 'flex'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item.productImg[0],\n      width: \"70px\",\n      height: \"80px\",\n      style: {\n        padding: '5px 0'\n      },\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 49\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 49\n      }\n    }, item.productPrice)), item.productSale > 0 && /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        color: 'green'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 53\n      }\n    }, item.productSale, \"%\")), item.productSale === 0 && /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 53\n      }\n    }, \"No sale\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 49\n      }\n    }, item.productSold)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 49\n      }\n    }, shortedDate)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 45\n      }\n    }, averageRating, /*#__PURE__*/React.createElement(ReactStars, Object.assign({\n      size: 12,\n      value: averageRating,\n      edit: false,\n      activeColor: \"#fda32a\",\n      color: \"#ddd\",\n      isHalf: true\n    }, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 49\n      }\n    }))), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"action-table flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"action-item flex-center action-green\",\n      onClick: props.setOpenEditFunc,\n      id: item._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      style: {\n        pointerEvents: 'none'\n      },\n      icon: faPencilAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 57\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"action-item flex-center action-red\",\n      onClick: deleteOnClick,\n      id: item._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      style: {\n        pointerEvents: 'none'\n      },\n      icon: faTimes,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 57\n      }\n    })))));\n  }))))));\n}","map":{"version":3,"sources":["/Users/namduong/Documents/dev/shop-project/frontend/src/components/admin/Dashboard/Product/DashboardProductTable.js"],"names":["React","useEffect","useState","FontAwesomeIcon","ReactStars","faLongArrowAltDown","faPencilAlt","faSort","faTimes","axios","classNames","DashboardProductTable","props","products","setProducts","constProducts","setConstProducts","isSortByName","setIsSortByName","isSortByPrice","setIsSortByPrice","isSortBySale","setIsSortBySale","isSortBySold","setIsSortBySold","get","then","res","data","isChange","deleteOnClick","event","post","target","id","productId","filter","item","_id","searchOnSubmit","preventDefault","searchOnChange","searchInput","value","search","i","productName","toLowerCase","includes","push","sortTable","sortByName","sort","a","b","nameA","nameB","width","color","icon","title","setOpenCreateFunc","tableLayout","table","map","index","date","Date","productDate","day","getDay","month","getMonth","year","getFullYear","shortedDate","ratingList","productVote","ratingStar","totalRating","reduce","averageRating","length","display","productImg","padding","productPrice","productSale","productSold","size","edit","activeColor","isHalf","setOpenEditFunc","pointerEvents"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport '../../../../App.css'\nimport '../../../../Styles/Dashboard.css'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport ReactStars from \"react-rating-stars-component\";\nimport { faLongArrowAltDown, faPencilAlt, faSort, faTimes } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\nimport classNames from 'classnames'\n\nexport default function DashboardProductTable(props) {\n\n    const [products, setProducts] = useState([])\n    const [constProducts, setConstProducts] = useState([])\n    const [isSortByName, setIsSortByName] = useState(false)\n    const [isSortByPrice, setIsSortByPrice] = useState(false)\n    const [isSortBySale, setIsSortBySale] = useState(false)\n    const [isSortBySold, setIsSortBySold] = useState(false)\n    \n    useEffect(()=>{\n        axios.get(`http://localhost:4000/products`)\n            .then(res => {\n                setProducts(res.data)\n                setConstProducts(res.data)\n            }\n        )\n    },[props.isChange]) \n\n    const deleteOnClick = (event) => {\n        axios.post(`http://localhost:4000/products/delete/:${event.target.id}`, {\n            productId: event.target.id\n        })\n        setProducts(products.filter((item)=>{\n            return item._id !== event.target.id\n        }))\n    }\n\n    const searchOnSubmit = (event) =>{\n        event.preventDefault()\n    }\n    const searchOnChange = (event) => {\n        // setSearchInput(event.target.value)\n        const searchInput = event.target.value\n        const search = []\n        for (let i in constProducts) {\n            if ((constProducts[i].productName).toLowerCase().includes(searchInput)) {\n                search.push(constProducts[i])\n            }\n        }\n        setProducts(search)\n    }\n\n    const sortTable = (event) => {\n        if (event.target.id === \"Name\") {\n            if (isSortByName) {\n                const sortByName = [...products]\n                sortByName.sort(function(a, b) {\n                    var nameA = a.productName.toLowerCase();\n                    var nameB = b.productName.toLowerCase(); \n                    if(nameA === nameB) return 0; \n                    return nameA > nameB ? 1 : -1;\n                })\n                setIsSortByName(false)\n                setProducts(sortByName)\n            } else {\n                const sortByName = [...products]\n                sortByName.sort(function(a, b) {\n                    var nameA = a.productName.toLowerCase();\n                    var nameB = b.productName.toLowerCase(); \n                    if(nameA === nameB) return 0; \n                    return nameA < nameB ? 1 : -1;\n                })\n                setIsSortByName(true)\n                setProducts(sortByName)\n            }\n        }\n        if (event.target.id === \"Price\") {\n            if (isSortByPrice) {\n                const sortByName = [...products]\n                sortByName.sort(function(a, b) {\n                    var nameA = a.productName;\n                    var nameB = b.productName; \n                    if(nameA === nameB) return 0; \n                    return nameA > nameB ? 1 : -1;\n                })\n                setIsSortByPrice(false)\n                setProducts(sortByName)\n            } else {\n                const sortByName = [...products]\n                sortByName.sort(function(a, b) {\n                    var nameA = a.productName;\n                    var nameB = b.productName; \n                    if(nameA === nameB) return 0; \n                    return nameA < nameB ? 1 : -1;\n                })\n                setIsSortByPrice(true)\n                setProducts(sortByName)\n            }\n        }\n        if (event.target.id === \"Sale\") {\n            if (isSortBySale) {\n                const sortByName = [...products]\n                sortByName.sort(function(a, b) {\n                    var nameA = a.productName;\n                    var nameB = b.productName; \n                    if(nameA === nameB) return 0; \n                    return nameA > nameB ? 1 : -1;\n                })\n                setIsSortBySale(false)\n                setProducts(sortByName)\n            } else {\n                const sortByName = [...products]\n                sortByName.sort(function(a, b) {\n                    var nameA = a.productName;\n                    var nameB = b.productName; \n                    if(nameA === nameB) return 0; \n                    return nameA < nameB ? 1 : -1;\n                })\n                setIsSortBySale(true)\n                setProducts(sortByName)\n            }\n        }\n        if (event.target.id === \"Sold\") {\n            if (isSortBySold) {\n                const sortByName = [...products]\n                sortByName.sort(function(a, b) {\n                    var nameA = a.productName;\n                    var nameB = b.productName; \n                    if(nameA === nameB) return 0; \n                    return nameA > nameB ? 1 : -1;\n                })\n                setIsSortBySold(false)\n                setProducts(sortByName)\n            } else {\n                const sortByName = [...products]\n                sortByName.sort(function(a, b) {\n                    var nameA = a.productName;\n                    var nameB = b.productName; \n                    if(nameA === nameB) return 0; \n                    return nameA < nameB ? 1 : -1;\n                })\n                setIsSortBySold(true)\n                setProducts(sortByName)\n            }\n        }\n    }\n\n    return (\n        <div className=\"topfive flex-col\" style={{width: '100%'}}>\n            <div className={`headerbox flex-center ${props.color}`}>\n                <FontAwesomeIcon icon={props.icon} className=\"icon\"/>\n            </div>\n            <div className=\"top-location-container\">\n                <div className=\"headerbox-header\">\n                    <p>{props.title}</p>\n                </div>\n                <div className=\"topfive-content flex-col\">\n                    <div className=\"dashboard-addnew flex\">\n                        <div \n                            className=\"dashboard-addnew-btn btn\"\n                            onClick={props.setOpenCreateFunc}\n                        >Add new</div>\n                        <div className=\"dashboard-addnew-search\">\n                            <form onSubmit={searchOnSubmit}>\n                                <input type=\"text\" placeholder=\"Search records\"\n                                onChange={searchOnChange}></input>\n                            </form>\n                        </div>\n                    </div>\n                    <table className=\"dashboard-table\" style={{tableLayout: 'fixed'}}>\n                        <tbody>\n                            <tr>\n                                {\n                                    props.table.map((item, index) => {\n                                        return (\n                                            <th \n                                                key={index} className=\"table-title\"\n                                                onClick={(event)=>{\n                                                    sortTable(event)\n                                                }}\n                                                id={item}\n                                            >\n                                                {item}\n                                            </th>\n                                        )\n                                    })\n                                }\n                            </tr>\n                            {\n                                products.map((item, index) => {\n                                    const date = new Date(item.productDate)\n                                    const day = date.getDay();\n                                    const month = date.getMonth();\n                                    const year = date.getFullYear();\n                                    const shortedDate = day + '/' + month + '/' + year;\n                                    //Counting star vote\n                                    const ratingList = item.productVote.map(a => a.ratingStar); // get all rating\n                                    const totalRating = ratingList.reduce((a, b) => a + b, 0)\n\n                                    const averageRating = totalRating/ratingList.length\n                                    \n                                    return (\n                                        <tr key={index}>\n                                            <td className=\"table-name\">\n                                                <p>{item.productName}</p>\n                                            </td>\n                                            <td style={{display: 'flex'}}>\n                                                <img \n                                                    src={item.productImg[0]} \n                                                    width=\"70px\" height=\"80px\"\n                                                    style={{padding: '5px 0'}}\n                                                    alt=\"\"\n                                                />\n                                            </td>\n                                            <td>\n                                                <p>{item.productPrice}</p>\n                                            </td>\n                                            { item.productSale > 0 &&\n                                                <td>\n                                                    <p style={{color: 'green'}}>{item.productSale}%</p>\n                                                </td>\n                                            }\n                                            { item.productSale === 0 &&\n                                                <td>\n                                                    <p style={{color: 'red'}}>No sale</p>\n                                                </td>\n                                            }\n                                            <td>\n                                                <p>{item.productSold}</p>\n                                            </td>\n                                            <td>\n                                                <p>{shortedDate}</p>\n                                            </td>\n                                            <td>\n                                                {averageRating}\n                                                <ReactStars {...{\n                                                    size: 12,\n                                                    value: averageRating,\n                                                    edit: false,\n                                                    activeColor: \"#fda32a\",\n                                                    color: \"#ddd\",\n                                                    isHalf: true\n                                                }}/>\n                                            </td>\n                                            <td>\n                                                <div className=\"action-table flex\">\n                                                    <div \n                                                        className=\"action-item flex-center action-green\"\n                                                        onClick={props.setOpenEditFunc}\n                                                        id={item._id}\n                                                        >\n                                                        <FontAwesomeIcon style={{pointerEvents: 'none'}} icon={faPencilAlt}/>\n                                                    </div>\n                                                    <div \n                                                        className=\"action-item flex-center action-red\"\n                                                        onClick={deleteOnClick}\n                                                        id={item._id}\n                                                        >\n                                                        <FontAwesomeIcon style={{pointerEvents: 'none'}} icon={faTimes}/>\n                                                    </div>\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    )\n                                })\n                            }\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}