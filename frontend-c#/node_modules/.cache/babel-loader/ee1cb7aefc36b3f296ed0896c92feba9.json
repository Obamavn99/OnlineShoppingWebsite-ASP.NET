{"ast":null,"code":"var _jsxFileName = \"/Users/namduong/Projects/OnlineShop-ASP.net/frontend-c#/src/components/Header/Account.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport '../../App.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes, faCheck } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport { UserContext } from '../../contexts/User';\nimport AccountInfo from './AccountInfo';\n\nfunction Account(props) {\n  const {\n    setUserInfoFunc\n  } = useContext(UserContext);\n  const [check, setCheck] = useState(false);\n  const [tabID, setTabID] = useState(0);\n  const [arrSuccess, setArrSuccess] = useState([]);\n  const [arrErr, setArrErr] = useState([]);\n  const [user, setUser] = useState({});\n  const [login, setLogin] = useState(false);\n\n  const handleOnChange = event => {\n    setUser({ ...user,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleOnSubmit = event => {\n    event.preventDefault();\n\n    if (tabID === 0) {\n      axios.post('https://localhost:4000/api/user', {\n        userEmail: user.loginEmail,\n        userPassword: user.loginPassword\n      }).then(res => {\n        setArrSuccess(arrSuccess => [...arrSuccess, \"Login success!\"]);\n        setTimeout(() => {\n          window.location.reload(false);\n          document.body.style.overflow = 'unset';\n        }, 1000);\n        localStorage.setItem('user-id', res.data.id);\n      }).catch(err => {\n        if (err.response) {\n          setArrErr(arrErr => [...arrErr, err.response.data.title]);\n        }\n      });\n    } else {\n      axios.post('https://localhost:4000/api/user/register', {\n        userAvt: \"http://pe.heromc.net:4000/images/16f9bbf512b66a228f7978e34d8fb163\",\n        userTinh: null,\n        userHuyen: null,\n        userPhone: null,\n        userAddress: null,\n        userCreateDay: new Date(),\n        userName: user.registerName,\n        userEmail: user.registerEmail,\n        userPassword: user.registerPassword,\n        userRole: \"user\"\n      }).then(res => {\n        setArrSuccess(arrSuccess => [...arrSuccess, \"Register success\"]);\n        setTimeout(() => {\n          window.location.reload(false);\n          document.body.style.overflow = 'unset';\n        }, 1000);\n      }).catch(err => {\n        if (err.response) {\n          setArrErr(arrErr => [...arrErr, err.response.data]);\n        }\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem('user-id')) {\n      axios.get(`https://localhost:4000/api/user/${localStorage.getItem('user-id')}`).then(res => {\n        setUserInfoFunc(res.data);\n        setLogin(true);\n      });\n    }\n  }, []);\n  let uniqueErr,\n      uniqueSuccess = [];\n\n  if (arrErr.length > 0) {\n    uniqueErr = arrErr.filter(function (item, pos) {\n      return arrErr.indexOf(item) === pos;\n    });\n  }\n\n  if (arrSuccess.length > 0) {\n    uniqueSuccess = arrSuccess.filter(function (item, pos) {\n      return arrSuccess.indexOf(item) === pos;\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: props.accountOpen === false ? 'Account displayNone' : 'Account',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"account-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-header flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, \"My Account\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-close\",\n    onClick: props.clickToClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTimes,\n    className: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }))), login === true && /*#__PURE__*/React.createElement(AccountInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }), login === false && /*#__PURE__*/React.createElement(\"div\", {\n    className: props.accountOpen === false ? '' : 'fadeIn',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-tab login-tab flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: tabID === 0 ? 'search-tab-cate search-tab-active' : 'search-tab-cate',\n    onClick: () => {\n      setTabID(0);\n      setArrErr([]);\n      setArrSuccess([]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: tabID === 1 ? 'search-tab-cate search-tab-active' : 'search-tab-cate',\n    onClick: () => {\n      setTabID(1);\n      setArrErr([]);\n      setArrSuccess([]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, \"Register\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-err flex-center flex-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, uniqueErr && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }, uniqueErr.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTimes,\n      style: {\n        marginRight: '10px',\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 49\n      }\n    }), item);\n  })), uniqueSuccess && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  }, uniqueSuccess.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"login-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faCheck,\n      style: {\n        marginRight: '10px',\n        color: 'green'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 49\n      }\n    }), item);\n  }))), tabID === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-form login-form fadeToRight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"flex-col\",\n    onSubmit: handleOnSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Email\",\n    name: \"loginEmail\",\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Password\",\n    name: \"loginPassword\",\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"remember-login flex noselect\",\n    onClick: () => {\n      if (check) {\n        setCheck(false);\n      } else {\n        setCheck(true);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"check-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 37\n    }\n  }), check && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"check-box-active flex-center\",\n    onClick: () => setCheck(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"check-box-active\",\n    icon: faCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 45\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 37\n    }\n  }, \"Remember me\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleOnSubmit,\n    className: \"btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 33\n    }\n  }, \"LOGIN\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 33\n    }\n  }, \"LOST YOUR PASSWORD?\"))), tabID === 1 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-form login-form fadeToLeft\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"flex-col\",\n    onSubmit: handleOnSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Name\",\n    name: \"registerName\",\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Email\",\n    name: \"registerEmail\",\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Password\",\n    name: \"registerPassword\",\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 33\n    }\n  }, \"REGISTER\"))))));\n}\n\nexport default withRouter(Account);","map":{"version":3,"sources":["/Users/namduong/Projects/OnlineShop-ASP.net/frontend-c#/src/components/Header/Account.js"],"names":["React","useContext","useEffect","useState","FontAwesomeIcon","faTimes","faCheck","axios","withRouter","UserContext","AccountInfo","Account","props","setUserInfoFunc","check","setCheck","tabID","setTabID","arrSuccess","setArrSuccess","arrErr","setArrErr","user","setUser","login","setLogin","handleOnChange","event","target","name","value","handleOnSubmit","preventDefault","post","userEmail","loginEmail","userPassword","loginPassword","then","res","setTimeout","window","location","reload","document","body","style","overflow","localStorage","setItem","data","id","catch","err","response","title","userAvt","userTinh","userHuyen","userPhone","userAddress","userCreateDay","Date","userName","registerName","registerEmail","registerPassword","userRole","getItem","get","uniqueErr","uniqueSuccess","length","filter","item","pos","indexOf","accountOpen","clickToClose","map","index","marginRight","color"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport '../../App.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes , faCheck } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios'\nimport {\n    withRouter\n} from 'react-router-dom'\n\nimport { UserContext } from '../../contexts/User'\nimport AccountInfo from './AccountInfo'\n\nfunction Account(props) {\n    const { \n        setUserInfoFunc \n    } = useContext(UserContext);\n\n    const [check, setCheck] = useState(false);\n    const [tabID, setTabID] = useState(0);\n    const [arrSuccess, setArrSuccess] = useState([]);\n    const [arrErr, setArrErr] = useState([]);\n    const [user, setUser] = useState({});\n    const [login, setLogin] = useState(false);\n\n    const handleOnChange = (event) => {\n        setUser({...user , [event.target.name]: event.target.value})\n    }\n\n    const handleOnSubmit = (event) => {\n        event.preventDefault();\n        if (tabID === 0) {\n            axios.post('https://localhost:4000/api/user', {\n                userEmail: user.loginEmail,\n                userPassword: user.loginPassword\n            })\n            .then(res => {\n                setArrSuccess(arrSuccess=>[...arrSuccess, \"Login success!\"])\n                setTimeout(()=> { \n                    window.location.reload(false);\n                    document.body.style.overflow = 'unset';\n                }, 1000)  \n                localStorage.setItem('user-id', res.data.id);\n            })\n            .catch(err => { \n                if (err.response) { \n                    setArrErr(arrErr=>[...arrErr, err.response.data.title]);\n                }\n            })\n        } else {\n            axios.post('https://localhost:4000/api/user/register', {\n                userAvt: \"http://pe.heromc.net:4000/images/16f9bbf512b66a228f7978e34d8fb163\",\n                userTinh: null,\n                userHuyen: null,  \n                userPhone: null,\n                userAddress: null, \n                userCreateDay: new Date(),\n                userName: user.registerName,\n                userEmail: user.registerEmail,\n                userPassword: user.registerPassword,\n                userRole: \"user\"\n            })\n            .then(res => { \n                setArrSuccess(arrSuccess=>[...arrSuccess, \"Register success\"])\n                setTimeout(()=> {\n                    window.location.reload(false);\n                    document.body.style.overflow = 'unset';\n                }, 1000)\n            })\n            .catch(err => { \n                if (err.response) { \n                    setArrErr(arrErr=>[...arrErr, err.response.data]);\n                }\n            })\n        }\n    }\n\n    useEffect(()=> {\n        if (localStorage.getItem('user-id')) {\n            axios.get(`https://localhost:4000/api/user/${localStorage.getItem('user-id')}`)\n            .then(res => { \n                setUserInfoFunc(res.data);\n                setLogin(true);\n            }) \n        }\n    },[]) \n\n    let uniqueErr, uniqueSuccess = [];\n    if (arrErr.length > 0) {\n        uniqueErr = arrErr.filter(function(item, pos) {\n            return arrErr.indexOf(item) === pos;\n        })\n    }\n    if (arrSuccess.length > 0) {\n        uniqueSuccess = arrSuccess.filter(function(item, pos) {\n            return arrSuccess.indexOf(item) === pos;\n        })\n    }\n\n    return(\n        <div className={props.accountOpen === false ? 'Account displayNone' : 'Account'}>\n            <div className=\"account-container\">\n                <div className=\"search-header flex\">\n                    <div className=\"search-title\">My Account</div>\n                    <div\n                        className=\"search-close\"\n                        onClick={props.clickToClose}\n                        >\n                        <FontAwesomeIcon \n                            icon={faTimes}\n                            className=\"icon\"\n                            />\n                    </div>\n                </div >\n                \n                {login === true && \n                    <AccountInfo/>\n                }\n                \n                {login === false && \n                <div className={props.accountOpen === false ? '' : 'fadeIn'}>\n                    <div \n                        className='search-tab login-tab flex'>\n                        <div \n                            className={tabID === 0 ? 'search-tab-cate search-tab-active' : 'search-tab-cate'}\n                            onClick={() => {setTabID(0);setArrErr([]);setArrSuccess([])}}\n                            >\n                            Login\n                        </div>\n                        <div \n                            className={tabID === 1 ? 'search-tab-cate search-tab-active' : 'search-tab-cate'}\n                            onClick={() => {setTabID(1);setArrErr([]);setArrSuccess([])}}\n                            >\n                            Register\n                        </div>\n                    </div>\n                    <div className=\"login-err flex-center flex-col\">\n                        { uniqueErr && \n                            <div>\n                                {\n                                    uniqueErr.map((item, index) => {\n                                        return(\n                                            <div key={index}>\n                                                <FontAwesomeIcon icon={faTimes} style={{ marginRight: '10px', color: 'red'}}/>\n                                                {item}\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </div>\n                        }\n                        { uniqueSuccess && \n                            <div >\n                                {\n                                    uniqueSuccess.map((item, index) => {\n                                        return(\n                                            <div key={index} className=\"login-success\">\n                                                <FontAwesomeIcon icon={faCheck} style={{ marginRight: '10px', color: 'green'}}/>\n                                                {item}\n                                            </div>\n                                        )\n                                    })\n                                }\n                            </div>\n                        }\n                    </div>\n                    { tabID === 0 &&\n                        <div className=\"search-form login-form fadeToRight\">\n                            <form className=\"flex-col\" onSubmit={handleOnSubmit}>\n                                <input type=\"text\" placeholder=\"Email\" name=\"loginEmail\" onChange={handleOnChange}/>\n                                <input type=\"password\" placeholder=\"Password\" name=\"loginPassword\" onChange={handleOnChange}/>\n                                <div className=\"remember-login flex noselect\" \n                                    onClick={() => { \n                                        if (check) {\n                                            setCheck(false)\n                                        } else { \n                                            setCheck(true) \n                                        }\n                                    }}\n                                >\n                                    <div className=\"check-box\"></div>\n                                    {check && \n                                        <div className=\"check-box-active flex-center\" onClick={()=> setCheck(false)}>\n                                            <FontAwesomeIcon className=\"check-box-active\" icon={faCheck}></FontAwesomeIcon>\n                                        </div>\n                                    }\n                                    <p>Remember me</p>\n                                </div>\n                                <button type=\"submit\" onClick={handleOnSubmit} className=\"btn\">LOGIN</button>\n                                <label>LOST YOUR PASSWORD?</label>\n                            </form>\n                        </div>\n                    }\n                    { tabID === 1 && \n                        <div className=\"search-form login-form fadeToLeft\">\n                            <form className=\"flex-col\" onSubmit={handleOnSubmit}>\n                                <input type=\"text\" placeholder=\"Name\" name=\"registerName\" onChange={handleOnChange}/>\n                                <input type=\"text\" placeholder=\"Email\" name=\"registerEmail\" onChange={handleOnChange}/>\n                                <input type=\"password\" placeholder=\"Password\" name=\"registerPassword\" onChange={handleOnChange}/>\n                                <button className=\"btn\">REGISTER</button>\n                            </form>\n                        </div>\n                    }\n                </div>\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default withRouter(Account);"]},"metadata":{},"sourceType":"module"}